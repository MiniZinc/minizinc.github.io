<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4.3. Interfacing Solvers to Flatzinc &mdash; The MiniZinc Handbook 2.8.5</title>
      <link rel="stylesheet" type="text/css" href="static/pygments.css?v=77553476" />
      <link rel="stylesheet" type="text/css" href="static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="static/style.css?v=572cde19" />

  
    <link rel="canonical" href="http://www.minizinc.org/doc-latest/en/fzn-spec.html"/>
  <!--[if lt IE 9]>
    <script src="static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="static/jquery.js?v=5d32c60e"></script>
        <script src="static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="static/documentation_options.js?v=3d63d4ae"></script>
        <script src="static/doctools.js?v=888ff710"></script>
        <script src="static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="static/translations.js?v=beaddf03"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="static/js/doc-links.js?v=34cd1aa9"></script>
    <script src="static/js/theme.js"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" />
    <link rel="next" title="4.4. Machine-readable JSON output format" href="json-stream.html" />
    <link rel="prev" title="4.2.7.1. On Restart" href="lib-experimental-on_restart.html" />
    <link rel="apple-touch-icon" sizes="57x57" href="static/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="static/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="static/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="static/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="static/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="static/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="static/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="static/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="static/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="static/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="static/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="static/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="static/favicon/favicon-16x16.png">
    <link rel="manifest" href="static/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="static/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  <a href="https://www.minizinc.org">
    
      <img src="static/MiniZn_logo_2.svg" class="logo" alt="Logo"/>
  </a>
      <div class="version">
        2.8.5
      </div>

  
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" aria-label="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
  
  
    
  
  <a href="index.html" class="reference internal icon icon-home"> The MiniZinc Handbook </a>
  
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="part_1_overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="part_2_tutorial.html">2. Minizinc 指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="part_3_user_manual.html">3. User Manual</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="part_4_reference.html">4. Reference Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="spec.html">4.1. Specification of MiniZinc</a></li>
<li class="toctree-l2"><a class="reference internal" href="lib.html">4.2. The MiniZinc library</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4.3. Interfacing Solvers to Flatzinc</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#specification-of-flatzinc">4.3.1. Specification of FlatZinc</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#comments">4.3.1.1. Comments</a></li>
<li class="toctree-l4"><a class="reference internal" href="#types">4.3.1.2. Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#values-and-expressions">4.3.1.3. Values and expressions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#flatzinc-models">4.3.1.4. FlatZinc models</a></li>
<li class="toctree-l4"><a class="reference internal" href="#predicate-declarations">4.3.1.5. Predicate declarations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameter-declarations">4.3.1.6. Parameter declarations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#variable-declarations">4.3.1.7. Variable declarations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#constraints">4.3.1.8. Constraints</a></li>
<li class="toctree-l4"><a class="reference internal" href="#solve-item">4.3.1.9. Solve item</a></li>
<li class="toctree-l4"><a class="reference internal" href="#annotations">4.3.1.10. Annotations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#specification-of-flatzinc-json">4.3.2. Specification of FlatZinc-JSON</a></li>
<li class="toctree-l3"><a class="reference internal" href="#output">4.3.3. Output</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#solution-output">4.3.3.1. Solution output</a></li>
<li class="toctree-l4"><a class="reference internal" href="#statistics-output">4.3.3.2. Statistics output</a></li>
<li class="toctree-l4"><a class="reference internal" href="#error-and-warning-output">4.3.3.3. Error and warning output</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#solver-specific-libraries">4.3.4. Solver-specific Libraries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#standard-predicates">4.3.4.1. Standard predicates</a></li>
<li class="toctree-l4"><a class="reference internal" href="#solver-specific-predicates">4.3.4.2. Solver-specific predicates</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reified-and-half-reified-predicates">4.3.4.3. Reified and half-reified predicates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#command-line-interface-and-standard-options">4.3.5. Command-Line Interface and Standard Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#solver-configuration-files">4.3.6. Solver Configuration Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#grammar">4.3.7. Grammar</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="json-stream.html">4.4. Machine-readable JSON output format</a></li>
</ul>
</li>
</ul>

  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">The MiniZinc Handbook</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="part_4_reference.html"><span class="section-number">4. </span>Reference Manual</a></li>
      <li class="breadcrumb-item active"><span class="section-number">4.3. </span>Interfacing Solvers to Flatzinc</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="interfacing-solvers-to-flatzinc">
<span id="ch-fzn-interfacing"></span><h1><span class="section-number">4.3. </span>Interfacing Solvers to Flatzinc<a class="headerlink" href="#interfacing-solvers-to-flatzinc" title="Link to this heading"></a></h1>
<p>This document describes the interface between the MiniZinc system and FlatZinc solvers. Interfacing a solver with MiniZinc usually requires three components:</p>
<ol class="arabic simple">
<li><p>The solver binary (or a script that runs the solver). It should support the command line options specified in <a class="reference internal" href="#fzn-cmdline-options"><span class="std std-numref">节 4.3.5</span></a>, understand either the FlatZinc input language as defined in <a class="reference internal" href="#ch-fzn-spec"><span class="std std-numref">节 4.3.1</span></a>, or the FlatZinc-JSON input language as defined in <a class="reference internal" href="#ch-fzn-json"><span class="std std-numref">节 4.3.2</span></a>. Solvers must produce output as defined in <a class="reference internal" href="#ch-fzn-output"><span class="std std-numref">节 4.3.3</span></a>.</p></li>
<li><p>The solver’s MiniZinc library. This library defines the global constraints that the solver supports, and redefines FlatZinc built-in constraints that the solver does not support (see <a class="reference internal" href="#ch-solver-specific-libraries"><span class="std std-numref">节 4.3.4</span></a>).</p></li>
<li><p>The solver’s configuration file. This file makes the solver known to the <tt class="docutils literal">minizinc</tt> driver program and the MiniZinc IDE. Configuration files are discussed in <a class="reference internal" href="#sec-cmdline-conffiles"><span class="std std-numref">节 4.3.6</span></a>.</p></li>
</ol>
<p>We recommend to install solvers following something similar to the Linux Filesystem Hierarchy Standard: When installing a solver called <tt class="docutils literal">$SOLVERNAME</tt> in a directory <tt class="docutils literal">$PREFIX</tt>, its binary should be put in <tt class="docutils literal">$PREFIX/bin</tt>, its MiniZinc library files should be in <tt class="docutils literal">$PREFIX/share/minizinc/$SOLVERNAME/</tt>, and its solver configuration file should be <tt class="docutils literal">$PREFIX/share/minizinc/solvers/$SOLVERNAME.mzc</tt>. The prefix can either be a global installation path (such as <tt class="docutils literal">/usr/local</tt>) or any other path.</p>
<section id="specification-of-flatzinc">
<span id="ch-fzn-spec"></span><h2><span class="section-number">4.3.1. </span>Specification of FlatZinc<a class="headerlink" href="#specification-of-flatzinc" title="Link to this heading"></a></h2>
<p>FlatZinc is the target constraint modelling language into which MiniZinc
models are translated.
It is a very simple solver independent problem specification language,
requiring minimal implementation effort to support.</p>
<p>Throughout this document: <span class="math notranslate nohighlight">\(r_1\)</span>, <span class="math notranslate nohighlight">\(r_2\)</span> denote float literals; <span class="math notranslate nohighlight">\(x_1, x_2, \dots, x_k, i, j, k\)</span> denote int literals; <span class="math notranslate nohighlight">\(y_1, y_2, \dots, y_k, y_i\)</span> denote literal array elements.</p>
<section id="comments">
<h3><span class="section-number">4.3.1.1. </span>Comments<a class="headerlink" href="#comments" title="Link to this heading"></a></h3>
<p>Comments start with a percent sign <tt class="docutils literal">%</tt> and extend to the end of the line. Comments can appear anywhere in a model.</p>
</section>
<section id="types">
<h3><span class="section-number">4.3.1.2. </span>Types<a class="headerlink" href="#types" title="Link to this heading"></a></h3>
<p>There are three varieties of types in FlatZinc.</p>
<ul class="simple">
<li><p><em>Parameter</em> types apply to fixed values that are specified directly in the model.</p></li>
<li><p><em>Variable</em> types apply to values computed by the solver during search. Every parameter type has a corresponding variable type; the variable type being distinguished by a <tt class="docutils literal">var</tt> keyword.</p></li>
<li><p><em>Annotations</em> and <em>strings</em>: annotations can appear on variable declarations, constraints, and on the solve goal. They provide information about how a variable or constraint should be treated by the solver (e.g., whether a variable should be output as part of the result or whether a particular constraint should implemented using domain consistency). Strings may appear as arguments to annotations, but nowhere else.</p></li>
</ul>
<section id="parameter-types">
<h4>Parameter types<a class="headerlink" href="#parameter-types" title="Link to this heading"></a></h4>
<p>Parameters are fixed quantities explicitly specified in the model
(see rule <code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;par-type&gt;</span></code> in <a class="reference internal" href="#ch-fzn-syntax"><span class="std std-numref">节 4.3.7</span></a>).</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><tt class="docutils literal">bool</tt></p></td>
<td><p><tt class="docutils literal">true</tt> or <tt class="docutils literal">false</tt></p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">float</tt></p></td>
<td><p>float</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">int</tt></p></td>
<td><p>int</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">set of int</tt></p></td>
<td><p>subset of int</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">array [1..</tt> <span class="math notranslate nohighlight">\(n\)</span> <tt class="docutils literal">] of bool</tt></p></td>
<td><p>array of bools</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">array [1..</tt> <span class="math notranslate nohighlight">\(n\)</span> <tt class="docutils literal">] of float</tt></p></td>
<td><p>array of floats</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">array [1..</tt> <span class="math notranslate nohighlight">\(n\)</span> <tt class="docutils literal">] of int</tt></p></td>
<td><p>array of ints</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">array [1..</tt> <span class="math notranslate nohighlight">\(n\)</span> <tt class="docutils literal">] of set of int</tt></p></td>
<td><p>array of sets of ints</p></td>
</tr>
</tbody>
</table>
<p>A parameter may be used where a variable is expected, but not vice versa.</p>
<p>In predicate declarations the following additional parameter types are allowed.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(r_a\)</span> <tt class="docutils literal">..</tt> <span class="math notranslate nohighlight">\(r_b\)</span></p></td>
<td><p>bounded float</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(x_a\)</span> <tt class="docutils literal">..</tt> <span class="math notranslate nohighlight">\(x_b\)</span></p></td>
<td><p>int in range</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">{</tt> <span class="math notranslate nohighlight">\(x_a, x_b, \ldots, x_k\)</span> <tt class="docutils literal">}</tt></p></td>
<td><p>int in set</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">set of</tt> <span class="math notranslate nohighlight">\(x_a\)</span> <tt class="docutils literal">..</tt> <span class="math notranslate nohighlight">\(x_b\)</span></p></td>
<td><p>subset of int range</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">set of</tt> <tt class="docutils literal">{</tt> <span class="math notranslate nohighlight">\(x_a, x_b, \ldots, x_k\)</span> <tt class="docutils literal">}</tt></p></td>
<td><p>subset of int set</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">array [1..</tt> <span class="math notranslate nohighlight">\(n\)</span> <tt class="docutils literal">] of</tt> <span class="math notranslate nohighlight">\(r_a\)</span> <tt class="docutils literal">..</tt> <span class="math notranslate nohighlight">\(r_b\)</span></p></td>
<td><p>array of floats in range</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">array [1..</tt> <span class="math notranslate nohighlight">\(n\)</span> <tt class="docutils literal">] of</tt> <span class="math notranslate nohighlight">\(x_a\)</span> <tt class="docutils literal">..</tt> <span class="math notranslate nohighlight">\(x_b\)</span></p></td>
<td><p>array of ints in range</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">array [1..</tt> <span class="math notranslate nohighlight">\(n\)</span> <tt class="docutils literal">] of set of</tt> <span class="math notranslate nohighlight">\(x_a\)</span> <tt class="docutils literal">..</tt> <span class="math notranslate nohighlight">\(x_b\)</span></p></td>
<td><p>array of sets of ints in range</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">array [1..</tt> <span class="math notranslate nohighlight">\(n\)</span> <tt class="docutils literal">] of set of</tt> <tt class="docutils literal">{</tt> <span class="math notranslate nohighlight">\(x_a, x_b, \ldots, x_k\)</span> <tt class="docutils literal">}</tt></p></td>
<td><p>array of subsets of set</p></td>
</tr>
</tbody>
</table>
<p>A range <span class="math notranslate nohighlight">\(x_a\)</span> <tt class="docutils literal">..</tt> <span class="math notranslate nohighlight">\(x_b\)</span> denotes a closed interval
<span class="math notranslate nohighlight">\(\{x | x_a \leq x \leq x_b\}\)</span> (same for float ranges).</p>
<p>An array type appearing in a predicate declaration may use just
<tt class="docutils literal">int</tt> instead of <tt class="docutils literal">1..</tt> <span class="math notranslate nohighlight">\(n\)</span> for the array index range
in cases where the array argument can be of any length.</p>
</section>
<section id="variable-types">
<h4>Variable types<a class="headerlink" href="#variable-types" title="Link to this heading"></a></h4>
<p>Variables are quantities decided by the solver
(see rules <code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;basic-var-type&gt;</span></code> and <code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;array-var-type&gt;</span></code> in <a class="reference internal" href="#ch-fzn-syntax"><span class="std std-numref">节 4.3.7</span></a>).</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Variable type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><tt class="docutils literal">var bool</tt></p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">var float</tt></p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">var</tt> <span class="math notranslate nohighlight">\(r_a\)</span> <tt class="docutils literal">..</tt> <span class="math notranslate nohighlight">\(r_b\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">var int</tt></p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">var</tt> <span class="math notranslate nohighlight">\(x_a\)</span> <tt class="docutils literal">..</tt> <span class="math notranslate nohighlight">\(x_b\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">var</tt> <tt class="docutils literal">{</tt> <span class="math notranslate nohighlight">\(x_a, x_b, \ldots, x_k\)</span> <tt class="docutils literal">}</tt></p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">var set of</tt> <span class="math notranslate nohighlight">\(x_a\)</span> <tt class="docutils literal">..</tt> <span class="math notranslate nohighlight">\(x_b\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">var set of {</tt> <span class="math notranslate nohighlight">\(x_a, x_b, \ldots, x_k\)</span> <tt class="docutils literal">}</tt></p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">array [1..</tt> <span class="math notranslate nohighlight">\(n\)</span> <tt class="docutils literal">] of var bool</tt></p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">array [1..</tt> <span class="math notranslate nohighlight">\(n\)</span> <tt class="docutils literal">] of var float</tt></p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">array [1..</tt> <span class="math notranslate nohighlight">\(n\)</span> <tt class="docutils literal">] of var</tt> <span class="math notranslate nohighlight">\(r_a\)</span> <tt class="docutils literal">..</tt> <span class="math notranslate nohighlight">\(r_b\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">array [1..</tt> <span class="math notranslate nohighlight">\(n\)</span> <tt class="docutils literal">] of var int</tt></p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">array [1..</tt> <span class="math notranslate nohighlight">\(n\)</span> <tt class="docutils literal">] of var</tt> <span class="math notranslate nohighlight">\(x_a\)</span> <tt class="docutils literal">..</tt> <span class="math notranslate nohighlight">\(x_b\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">array [1..</tt> <span class="math notranslate nohighlight">\(n\)</span> <tt class="docutils literal">] of var set of</tt> <span class="math notranslate nohighlight">\(x_a\)</span> <tt class="docutils literal">..</tt> <span class="math notranslate nohighlight">\(x_b\)</span></p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">array [1..</tt> <span class="math notranslate nohighlight">\(n\)</span> <tt class="docutils literal">] of var set of {</tt> <span class="math notranslate nohighlight">\(x_a, x_b, \ldots, x_k\)</span> <tt class="docutils literal">}</tt></p></td>
</tr>
</tbody>
</table>
<p>In predicate declarations the following additional variable types are allowed.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Variable type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><tt class="docutils literal">var set of int</tt></p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">array [1..</tt> <span class="math notranslate nohighlight">\(n\)</span> <tt class="docutils literal">] of var set of int</tt></p></td>
</tr>
</tbody>
</table>
<p>An array type appearing in a predicate declaration may use just
<tt class="docutils literal">int</tt> instead of <tt class="docutils literal">1..</tt> <span class="math notranslate nohighlight">\(n\)</span> for the array index range
in cases where the array argument can be of any length.</p>
</section>
<section id="the-string-type">
<h4>The string type<a class="headerlink" href="#the-string-type" title="Link to this heading"></a></h4>
<p>String literals and literal arrays of string literals can appear as
annotation arguments, but not elsewhere.
Strings have the same syntax as in C programs (namely, they are
delimited by double quotes and the backslash character is used for
escape sequences).</p>
<p>Examples:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;&quot;                              </span><span class="c">% The empty string.</span>
<span class="s">&quot;Hello.&quot;</span>
<span class="s">&quot;Hello,</span><span class="se">\n</span><span class="s">World</span><span class="se">\t\&quot;</span><span class="s">quoted!</span><span class="se">\&quot;</span><span class="s">&quot;    </span><span class="c">% A string with an embedded newline, tab and quotes.</span>
</pre></div>
</div>
</section>
</section>
<section id="values-and-expressions">
<h3><span class="section-number">4.3.1.3. </span>Values and expressions<a class="headerlink" href="#values-and-expressions" title="Link to this heading"></a></h3>
<p>(See rule <code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;expr&gt;</span></code> in <a class="reference internal" href="#ch-fzn-syntax"><span class="std std-numref">节 4.3.7</span></a>)</p>
<p>Examples of literal values:</p>
<p>Type Literals
<tt class="docutils literal">bool</tt> <tt class="docutils literal">true</tt>, <tt class="docutils literal">false</tt>
<tt class="docutils literal">float</tt> <tt class="docutils literal">2.718</tt>, <tt class="docutils literal">-1.0</tt>, <tt class="docutils literal">3.0e8</tt>
<tt class="docutils literal">int</tt> <tt class="docutils literal">-42</tt>, <tt class="docutils literal">0</tt>, <tt class="docutils literal">69</tt>
<tt class="docutils literal">set of int</tt> <tt class="docutils literal">{}</tt>, <tt class="docutils literal">{2, 3, 5}</tt>, <tt class="docutils literal">1..10</tt>
<tt class="docutils literal">arrays</tt> <tt class="docutils literal">[]</tt>, <tt class="docutils literal">[</tt> <span class="math notranslate nohighlight">\(y_a, \ldots, y_k\)</span> <tt class="docutils literal">]</tt></p>
<p>where each array element <span class="math notranslate nohighlight">\(y_i\)</span> is either: a non-array literal, or the
name of a non-array parameter or variable, <tt class="docutils literal">v</tt>. For example:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="s"> </span><span class="m">2</span><span class="p">,</span><span class="s"> </span><span class="m">3</span><span class="p">]</span><span class="s">             </span><span class="c">% Just literals</span>
<span class="p">[</span><span class="nv">x</span><span class="p">,</span><span class="s"> </span><span class="nv">y</span><span class="p">,</span><span class="s"> </span><span class="nv">z</span><span class="p">]</span><span class="s">             </span><span class="c">% x, y, and z are variables or parameters.</span>
<span class="p">[</span><span class="nv">x</span><span class="p">,</span><span class="s"> </span><span class="m">3</span><span class="p">]</span><span class="s">                </span><span class="c">% Mix of identifiers and literals</span>
</pre></div>
</div>
<p><a class="reference internal" href="#ch-fzn-syntax"><span class="std std-numref">节 4.3.7</span></a> gives the regular expressions specifying the
syntax for float and int literals.</p>
</section>
<section id="flatzinc-models">
<span id="ch-fzn-models"></span><h3><span class="section-number">4.3.1.4. </span>FlatZinc models<a class="headerlink" href="#flatzinc-models" title="Link to this heading"></a></h3>
<p>A FlatZinc model consists of:</p>
<ol class="arabic simple">
<li><p>zero or more external predicate declarations (i.e., a non-standard predicate that is supported directly by the target solver);</p></li>
<li><p>zero or more parameter declarations;</p></li>
<li><p>zero or more variable declarations;</p></li>
<li><p>zero or more constraints;</p></li>
<li><p>a solve goal</p></li>
</ol>
<p>in that order.</p>
<p>FlatZinc uses the UTF-8 character set. Non-ASCII characters can only appear in string literals.</p>
<p>FlatZinc syntax is case sensitive (<tt class="docutils literal">foo</tt> and <tt class="docutils literal">Foo</tt> are different
names).
Identifiers start with a letter (<tt class="docutils literal">[A-Za-z]</tt>) and are followed by
any sequence of letters, digits, or underscores (<tt class="docutils literal">[A-Za-z0-9_]</tt>).
Additionally, identifiers of variable or parameter names may start with an underscore.
Identifiers that correspond to the names of predicates, predicate parameters
and annotations cannot have leading underscores.</p>
<p>The following keywords are reserved and cannot be used as identifiers:
<tt class="docutils literal">annotation</tt>,
<tt class="docutils literal">any</tt>,
<tt class="docutils literal">array</tt>,
<tt class="docutils literal">bool</tt>,
<tt class="docutils literal">case</tt>,
<tt class="docutils literal">constraint</tt>,
<tt class="docutils literal">diff</tt>,
<tt class="docutils literal">div</tt>,
<tt class="docutils literal">else</tt>,
<tt class="docutils literal">elseif</tt>,
<tt class="docutils literal">endif</tt>,
<tt class="docutils literal">enum</tt>,
<tt class="docutils literal">false</tt>,
<tt class="docutils literal">float</tt>,
<tt class="docutils literal">function</tt>,
<tt class="docutils literal">if</tt>,
<tt class="docutils literal">in</tt>,
<tt class="docutils literal">include</tt>,
<tt class="docutils literal">int</tt>,
<tt class="docutils literal">intersect</tt>,
<tt class="docutils literal">let</tt>,
<tt class="docutils literal">list</tt>,
<tt class="docutils literal">maximize</tt>,
<tt class="docutils literal">minimize</tt>,
<tt class="docutils literal">mod</tt>,
<tt class="docutils literal">not</tt>,
<tt class="docutils literal">of</tt>,
<tt class="docutils literal">satisfy</tt>,
<tt class="docutils literal">subset</tt>,
<tt class="docutils literal">superset</tt>,
<tt class="docutils literal">output</tt>,
<tt class="docutils literal">par</tt>,
<tt class="docutils literal">predicate</tt>,
<tt class="docutils literal">record</tt>,
<tt class="docutils literal">set</tt>,
<tt class="docutils literal">solve</tt>,
<tt class="docutils literal">string</tt>,
<tt class="docutils literal">symdiff</tt>,
<tt class="docutils literal">test</tt>,
<tt class="docutils literal">then</tt>,
<tt class="docutils literal">true</tt>,
<tt class="docutils literal">tuple</tt>,
<tt class="docutils literal">union</tt>,
<tt class="docutils literal">type</tt>,
<tt class="docutils literal">var</tt>,
<tt class="docutils literal">where</tt>,
<tt class="docutils literal">xor</tt>.
Note that some of these keywords are not used in FlatZinc.
They are reserved because they are keywords in Zinc and MiniZinc.</p>
<p>FlatZinc syntax is insensitive to whitespace.</p>
</section>
<section id="predicate-declarations">
<h3><span class="section-number">4.3.1.5. </span>Predicate declarations<a class="headerlink" href="#predicate-declarations" title="Link to this heading"></a></h3>
<p>(See rule <code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;predicate-item&gt;</span></code> in <a class="reference internal" href="#ch-fzn-syntax"><span class="std std-numref">节 4.3.7</span></a>)</p>
<p>Predicates used in the model that are not standard FlatZinc must be
declared at the top of a FlatZinc model, before any other lexical items.
Predicate declarations take the form</p>
<div class="highlight-minizincdef notranslate"><div class="highlight"><pre><span></span><span class="cs">&lt;predicate-item&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> &quot;predicate&quot; </span><span class="cs">&lt;identifier&gt;</span><span class="s"> &quot;(&quot; </span><span class="p">[</span><span class="s"> </span><span class="cs">&lt;pred-param-type&gt;</span><span class="s"> </span><span class="p">:</span><span class="s"> </span><span class="cs">&lt;identifier&gt;</span><span class="s"> &quot;,&quot; ... </span><span class="p">]</span><span class="s"> &quot;)&quot; &quot;;&quot;</span>
</pre></div>
</div>
<p>Annotations are not permitted anywhere in predicate declarations.</p>
<p>It is illegal to supply more than one predicate declaration for a given
<code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;identifier&gt;</span></code>.</p>
<p>Examples:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="s">    </span><span class="c">% m is the median value of {x, y, z}.</span>
<span class="s">    </span><span class="c">%</span>
<span class="k">predicate</span><span class="s"> </span><span class="nf">median_of_3</span><span class="p">(</span><span class="kt">var</span><span class="s"> </span><span class="kt">int</span><span class="p">:</span><span class="s"> </span><span class="nv">x</span><span class="p">,</span><span class="s"> </span><span class="kt">var</span><span class="s"> </span><span class="kt">int</span><span class="p">:</span><span class="s"> </span><span class="nv">y</span><span class="p">,</span><span class="s"> </span><span class="kt">var</span><span class="s"> </span><span class="kt">int</span><span class="p">:</span><span class="s"> </span><span class="nv">z</span><span class="p">,</span><span class="s"> </span><span class="kt">var</span><span class="s"> </span><span class="kt">int</span><span class="p">:</span><span class="s"> </span><span class="nv">m</span><span class="p">);</span>

<span class="s">    </span><span class="c">% all_different([x1, .., xn]) iff</span>
<span class="s">    </span><span class="c">% for all i, j in 1..n: xi != xj.</span>
<span class="s">    </span><span class="c">%</span>
<span class="k">predicate</span><span class="s"> </span><span class="bp">all_different</span><span class="p">(</span><span class="kt">array</span><span class="s"> </span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="s"> </span><span class="kt">of</span><span class="s"> </span><span class="kt">var</span><span class="s"> </span><span class="kt">int</span><span class="p">:</span><span class="s"> </span><span class="nv">xs</span><span class="p">);</span>

<span class="s">    </span><span class="c">% exactly_one([x1, .., xn]) iff</span>
<span class="s">    </span><span class="c">% there exists an i in 1..n: xi = true</span>
<span class="s">    </span><span class="c">% and for all j in 1..n: j != i -&gt; xj = false.</span>
<span class="s">    </span><span class="c">%</span>
<span class="k">predicate</span><span class="s"> </span><span class="nf">exactly_one</span><span class="p">(</span><span class="kt">array</span><span class="s"> </span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="s"> </span><span class="kt">of</span><span class="s"> </span><span class="kt">var</span><span class="s"> </span><span class="kt">bool</span><span class="p">:</span><span class="s"> </span><span class="nv">xs</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="parameter-declarations">
<h3><span class="section-number">4.3.1.6. </span>Parameter declarations<a class="headerlink" href="#parameter-declarations" title="Link to this heading"></a></h3>
<p>(See rule <tt class="docutils literal">param_decl</tt> in <a class="reference internal" href="#ch-fzn-syntax"><span class="std std-numref">节 4.3.7</span></a>)</p>
<p>Parameters have fixed values and must be assigned values:</p>
<div class="highlight-minizincdef notranslate"><div class="highlight"><pre><span></span><span class="cs">&lt;par-decl-item&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> </span><span class="cs">&lt;par-type&gt;</span><span class="s"> &quot;:&quot; </span><span class="cs">&lt;var-par-identifier&gt;</span><span class="s"> &quot;=&quot; </span><span class="cs">&lt;par-expr&gt;</span><span class="s"> &quot;;&quot;</span>
</pre></div>
</div>
<p>where <code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;par-type&gt;</span></code> is a parameter type, <code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;var-par-identifier&gt;</span></code> is an identifier,
and <code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;par-expr&gt;</span></code> is a literal value (either a basic integer, float or bool literal, or a set or array of such literals).</p>
<p>Annotations are not permitted anywhere in parameter declarations.</p>
<p>Examples:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="kt">float</span><span class="p">:</span><span class="s"> </span><span class="nv">pi</span><span class="s"> </span><span class="o">=</span><span class="s"> </span><span class="m">3.141</span><span class="p">;</span>
<span class="kt">array</span><span class="s"> </span><span class="p">[</span><span class="m">1</span><span class="o">..</span><span class="m">7</span><span class="p">]</span><span class="s"> </span><span class="kt">of</span><span class="s"> </span><span class="kt">int</span><span class="p">:</span><span class="s"> </span><span class="nv">fib</span><span class="s"> </span><span class="o">=</span><span class="s"> </span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="s"> </span><span class="m">1</span><span class="p">,</span><span class="s"> </span><span class="m">2</span><span class="p">,</span><span class="s"> </span><span class="m">3</span><span class="p">,</span><span class="s"> </span><span class="m">5</span><span class="p">,</span><span class="s"> </span><span class="m">8</span><span class="p">,</span><span class="s"> </span><span class="m">13</span><span class="p">];</span>
<span class="kt">bool</span><span class="p">:</span><span class="s"> </span><span class="nv">beer_is_good</span><span class="s"> </span><span class="o">=</span><span class="s"> </span><span class="l">true</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="variable-declarations">
<h3><span class="section-number">4.3.1.7. </span>Variable declarations<a class="headerlink" href="#variable-declarations" title="Link to this heading"></a></h3>
<p>(See rule <tt class="docutils literal">var_decl</tt> in <a class="reference internal" href="#ch-fzn-syntax"><span class="std std-numref">节 4.3.7</span></a>)</p>
<p>Variables have variable types and can be declared with optional assignments.
The assignment can fix a variable to a literal value, or create an alias to another
variable. Arrays of variables always have an assignment, defining them in terms of an array literal
that can contain identifiers of variables or constant literals.
Variables may be declared with zero or more annotations.</p>
<div class="highlight-minizincdef notranslate"><div class="highlight"><pre><span></span><span class="cs">&lt;var-decl-item&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> </span><span class="cs">&lt;basic-var-type&gt;</span><span class="s"> &quot;:&quot; </span><span class="cs">&lt;var-par-identifier&gt;</span><span class="s"> </span><span class="cs">&lt;annotations&gt;</span><span class="s"> </span><span class="p">[</span><span class="s"> &quot;=&quot; </span><span class="cs">&lt;basic-expr&gt;</span><span class="s"> </span><span class="p">]</span><span class="s"> &quot;;&quot;</span>
<span class="cs">                  |</span><span class="s"> </span><span class="cs">&lt;array-var-type&gt;</span><span class="s"> &quot;:&quot; </span><span class="cs">&lt;var-par-identifier&gt;</span><span class="s"> </span><span class="cs">&lt;annotations&gt;</span><span class="s"> &quot;=&quot; </span><span class="cs">&lt;array-literal&gt;</span><span class="s"> &quot;;&quot;</span>
<span class="s">                  </span>
</pre></div>
</div>
<p>where <code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;basic-var-type&gt;</span></code> and <code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;array-var-type&gt;</span></code> are variable types, <code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;var-par-identifier&gt;</span></code> is an identifier,
<code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;annotations&gt;</span></code> is a (possibly empty) set of annotations, <code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;basic-expr&gt;</span></code> is an identifier or a literal, and <code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;array-literal&gt;</span></code> is a literal array
value.</p>
<p>Examples:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="kt">var</span><span class="s"> </span><span class="m">0</span><span class="o">..</span><span class="m">9</span><span class="p">:</span><span class="s"> </span><span class="nv">digit</span><span class="p">;</span>
<span class="kt">var</span><span class="s"> </span><span class="kt">bool</span><span class="p">:</span><span class="s"> </span><span class="nv">b</span><span class="p">;</span>
<span class="kt">var</span><span class="s"> </span><span class="kt">set</span><span class="s"> </span><span class="kt">of</span><span class="s"> </span><span class="m">1</span><span class="o">..</span><span class="m">3</span><span class="p">:</span><span class="s"> </span><span class="nv">s</span><span class="p">;</span>
<span class="kt">var</span><span class="s"> </span><span class="m">0.0</span><span class="o">..</span><span class="m">1.0</span><span class="p">:</span><span class="s"> </span><span class="nv">x</span><span class="p">;</span>
<span class="kt">var</span><span class="s"> </span><span class="kt">int</span><span class="p">:</span><span class="s"> </span><span class="nv">y</span><span class="s"> </span><span class="p">::</span><span class="s"> </span><span class="nv">mip</span><span class="p">;</span><span class="s">        </span><span class="c">% &#39;mip&#39; annotation: y should be a MIP variable.</span>
<span class="kt">array</span><span class="s"> </span><span class="p">[</span><span class="m">1</span><span class="o">..</span><span class="m">3</span><span class="p">]</span><span class="s"> </span><span class="kt">of</span><span class="s"> </span><span class="kt">var</span><span class="s"> </span><span class="m">1</span><span class="o">..</span><span class="m">10</span><span class="p">:</span><span class="s"> </span><span class="nv">b</span><span class="s"> </span><span class="o">=</span><span class="s"> </span><span class="p">[</span><span class="nv">y</span><span class="p">,</span><span class="s"> </span><span class="m">3</span><span class="p">,</span><span class="s"> </span><span class="nv">digit</span><span class="p">];</span>
</pre></div>
</div>
</section>
<section id="constraints">
<h3><span class="section-number">4.3.1.8. </span>Constraints<a class="headerlink" href="#constraints" title="Link to this heading"></a></h3>
<p>(See rule <code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;constraint-item&gt;</span></code> in <a class="reference internal" href="#ch-fzn-syntax"><span class="std std-numref">节 4.3.7</span></a>)</p>
<p>Constraints take the following form and may include zero or more annotations:</p>
<div class="highlight-minizincdef notranslate"><div class="highlight"><pre><span></span><span class="cs">&lt;constraint-item&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> &quot;constraint&quot; </span><span class="cs">&lt;identifier&gt;</span><span class="s"> &quot;(&quot; </span><span class="p">[</span><span class="s"> </span><span class="cs">&lt;expr&gt;</span><span class="s"> &quot;,&quot; ... </span><span class="p">]</span><span class="s"> &quot;)&quot; </span><span class="cs">&lt;annotations&gt;</span><span class="s"> &quot;;&quot;</span>
</pre></div>
</div>
<p>The arguments expressions (<code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;expr&gt;</span></code>) can be literal values or identifiers.</p>
<p>Examples:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="k">constraint</span><span class="s"> </span><span class="nf">int_le</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="s"> </span><span class="nv">x</span><span class="p">);</span><span class="s">    </span><span class="c">% 0 &lt;= x</span>
<span class="k">constraint</span><span class="s"> </span><span class="nf">int_lt</span><span class="p">(</span><span class="nv">x</span><span class="p">,</span><span class="s"> </span><span class="nv">y</span><span class="p">);</span><span class="s">    </span><span class="c">% x &lt;  y</span>
<span class="k">constraint</span><span class="s"> </span><span class="nf">int_le</span><span class="p">(</span><span class="nv">y</span><span class="p">,</span><span class="s"> </span><span class="m">10</span><span class="p">);</span><span class="s">   </span><span class="c">% y &lt;= 10</span>
<span class="s">    </span><span class="c">% &#39;domain_propagation&#39;: use domain consistency for this constraint:</span>
<span class="s">    </span><span class="c">% 2x + 3y = 10</span>
<span class="k">constraint</span><span class="s"> </span><span class="nf">int_lin_eq</span><span class="p">([</span><span class="m">2</span><span class="p">,</span><span class="s"> </span><span class="m">3</span><span class="p">],</span><span class="s"> </span><span class="p">[</span><span class="nv">x</span><span class="p">,</span><span class="s"> </span><span class="nv">y</span><span class="p">],</span><span class="s"> </span><span class="m">10</span><span class="p">)</span><span class="s"> </span><span class="p">::</span><span class="s"> </span><span class="nv">domain_propagation</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="solve-item">
<h3><span class="section-number">4.3.1.9. </span>Solve item<a class="headerlink" href="#solve-item" title="Link to this heading"></a></h3>
<p>(See rule <code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;solve-item&gt;</span></code> in <a class="reference internal" href="#ch-fzn-syntax"><span class="std std-numref">节 4.3.7</span></a>)</p>
<p>A model finishes with a solve item, taking one of the following forms:</p>
<div class="highlight-minizincdef notranslate"><div class="highlight"><pre><span></span><span class="cs">&lt;solve-item&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> &quot;solve&quot; </span><span class="cs">&lt;annotations&gt;</span><span class="s"> &quot;satisfy&quot; &quot;;&quot;</span>
<span class="cs">               |</span><span class="s"> &quot;solve&quot; </span><span class="cs">&lt;annotations&gt;</span><span class="s"> &quot;minimize&quot; </span><span class="cs">&lt;basic-expr&gt;</span><span class="s"> &quot;;&quot;</span>
<span class="cs">               |</span><span class="s"> &quot;solve&quot; </span><span class="cs">&lt;annotations&gt;</span><span class="s"> &quot;maximize&quot; </span><span class="cs">&lt;basic-expr&gt;</span><span class="s"> &quot;;&quot;</span>
</pre></div>
</div>
<p>The first alternative searches for any satisfying assignment, the second one searches for an assignment minimizing the given expression, and the third one for an assignment maximizing the expression. The <code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;basic-expr&gt;</span></code> can be either a variable identifier or a literal value (if the objective function is constant).</p>
<p>A solution consists of a complete assignment where all variables in the
model have been given a fixed value.</p>
<p>Examples:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="k">solve</span><span class="s"> </span><span class="k">satisfy</span><span class="p">;</span><span class="s">      </span><span class="c">% Find any solution using the default strategy.</span>

<span class="k">solve</span><span class="s"> </span><span class="k">minimize</span><span class="s"> </span><span class="nv">w</span><span class="p">;</span><span class="s">   </span><span class="c">% Find a solution minimizing w, using the default strategy.</span>

<span class="s">    </span><span class="c">% First label the variables in xs in the order x[1], x[2], ...</span>
<span class="s">    </span><span class="c">% trying values in ascending order.</span>
<span class="k">solve</span><span class="s"> </span><span class="p">::</span><span class="s"> </span><span class="nf">int_search</span><span class="p">(</span><span class="nv">xs</span><span class="p">,</span><span class="s"> </span><span class="nv">input_order</span><span class="p">,</span><span class="s"> </span><span class="nv">indomain_min</span><span class="p">,</span><span class="s"> </span><span class="nv">complete</span><span class="p">)</span>
<span class="s">    </span><span class="k">satisfy</span><span class="p">;</span><span class="s">    </span><span class="c">% Find any solution.</span>

<span class="s">    </span><span class="c">% First use first-fail on these variables, splitting domains</span>
<span class="s">    </span><span class="c">% at each choice point.</span>
<span class="k">solve</span><span class="s"> </span><span class="p">::</span><span class="s"> </span><span class="nf">int_search</span><span class="p">([</span><span class="nv">x</span><span class="p">,</span><span class="s"> </span><span class="nv">y</span><span class="p">,</span><span class="s"> </span><span class="nv">z</span><span class="p">],</span><span class="s"> </span><span class="nv">first_fail</span><span class="p">,</span><span class="s"> </span><span class="nv">indomain_split</span><span class="p">,</span><span class="s"> </span><span class="nv">complete</span><span class="p">)</span>
<span class="s">    </span><span class="k">maximize</span><span class="s"> </span><span class="nv">x</span><span class="p">;</span><span class="s"> </span><span class="c">% Find a solution maximizing x.</span>
</pre></div>
</div>
</section>
<section id="annotations">
<h3><span class="section-number">4.3.1.10. </span>Annotations<a class="headerlink" href="#annotations" title="Link to this heading"></a></h3>
<p>Annotations are optional suggestions to the solver concerning how
individual variables and constraints should be handled (e.g., a
particular solver may have multiple representations for int variables)
and how search should proceed.
An implementation is free to ignore any annotations it does not
recognise, although it should print a warning on the standard error
stream if it does so.
Annotations are unordered and idempotent: annotations can be reordered
and duplicates can be removed without changing the meaning of the
annotations.</p>
<p>An annotation is prefixed by <tt class="docutils literal">::</tt>, and either just an identifier or an expression that looks like a predicate call:</p>
<div class="highlight-minizincdef notranslate"><div class="highlight"><pre><span></span><span class="cs">&lt;annotations&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> </span><span class="p">[</span><span class="s"> &quot;::&quot; </span><span class="cs">&lt;annotation&gt;</span><span class="s"> </span><span class="p">]</span><span class="o">*</span>

<span class="cs">&lt;annotation&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> </span><span class="cs">&lt;identifier&gt;</span>
<span class="cs">               |</span><span class="s"> </span><span class="cs">&lt;identifier&gt;</span><span class="s"> &quot;(&quot; </span><span class="cs">&lt;ann-expr&gt;</span><span class="s"> &quot;,&quot; ... &quot;)&quot;</span>

<span class="cs">&lt;ann-expr&gt;</span><span class="s">   </span><span class="p">:</span><span class="o">=</span><span class="s"> </span><span class="cs">&lt;basic-ann-expr&gt;</span>
<span class="cs">              |</span><span class="s"> &quot;[&quot; </span><span class="p">[</span><span class="s"> </span><span class="cs">&lt;basic-ann-expr&gt;</span><span class="s"> &quot;,&quot; ... </span><span class="p">]</span><span class="s"> &quot;]&quot;</span>

<span class="cs">&lt;basic-ann-expr&gt;</span><span class="s">   </span><span class="p">:</span><span class="o">=</span><span class="s"> </span><span class="cs">&lt;basic-literal-expr&gt;</span>
<span class="cs">                    |</span><span class="s"> </span><span class="cs">&lt;var-par-identifier&gt;</span>
<span class="cs">                    |</span><span class="s"> </span><span class="cs">&lt;string-literal&gt;</span>
<span class="cs">                    |</span><span class="s"> </span><span class="cs">&lt;annotation&gt;</span>

<span class="cs">&lt;string-contents&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> </span><span class="p">(</span><span class="sr">[^&quot;\n\]</span><span class="s"> </span><span class="gr">|</span><span class="s"> \</span><span class="sr">[^\n(]</span><span class="p">)</span><span class="o">*</span>

<span class="cs">&lt;string-literal&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> &quot;&quot;&quot; </span><span class="cs">&lt;string-contents&gt;</span><span class="s"> &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>The arguments of the second alternative can be any expression or other annotations (without the leading <tt class="docutils literal">::</tt>).</p>
<section id="search-annotations">
<h4>Search annotations<a class="headerlink" href="#search-annotations" title="Link to this heading"></a></h4>
<p>While an implementation is free to ignore any or all annotations in a
model, it is recommended that implementations at least recognise the
following standard annotations for solve items.</p>
<div class="highlight-minizincdef notranslate"><div class="highlight"><pre><span></span><span class="nf">seq_search</span><span class="p">(</span><span class="sr">[&lt;searchannotation&gt;, ...]</span><span class="p">)</span>
</pre></div>
</div>
<p>allows more than one search annotation to be specified in a particular
order (otherwise annotations can be handled in any order).</p>
<p>A <code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;searchannotation&gt;</span></code> is one of the following:</p>
<div class="highlight-minizincdef notranslate"><div class="highlight"><pre><span></span><span class="nf">int_search</span><span class="p">(</span><span class="cs">&lt;vars&gt;</span><span class="p">,</span><span class="s"> </span><span class="cs">&lt;varchoiceannotation&gt;</span><span class="p">,</span><span class="s"> </span><span class="cs">&lt;assignmentannotation&gt;</span><span class="p">,</span><span class="s"> </span><span class="cs">&lt;strategyannotation&gt;</span><span class="p">)</span>

<span class="nf">bool_search</span><span class="p">(</span><span class="cs">&lt;vars&gt;</span><span class="p">,</span><span class="s"> </span><span class="cs">&lt;varchoiceannotation&gt;</span><span class="p">,</span><span class="s"> </span><span class="cs">&lt;assignmentannotation&gt;</span><span class="p">,</span><span class="s"> </span><span class="cs">&lt;strategyannotation&gt;</span><span class="p">)</span>

<span class="nf">set_search</span><span class="p">(</span><span class="cs">&lt;vars&gt;</span><span class="p">,</span><span class="s"> </span><span class="cs">&lt;varchoiceannotation&gt;</span><span class="p">,</span><span class="s"> </span><span class="cs">&lt;assignmentannotation&gt;</span><span class="p">,</span><span class="s"> </span><span class="cs">&lt;strategyannotation&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;vars&gt;</span></code> is the identifier of an array variable or an array literal specifying
the variables to be assigned (ints, bools, or sets respectively). Note that these arrays may contain literal values.</p>
<p><code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;varchoiceannotation&gt;</span></code> specifies how the next variable to be assigned is
chosen at each choice point.
Possible choices are as follows (it is recommended that implementations
support the starred options):</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><tt class="docutils literal">input_order</tt></p></td>
<td><p><span class="math notranslate nohighlight">\(\star\)</span></p></td>
<td><p>Choose variables in the order they appear in <code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="nv">vars</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">first_fail</tt></p></td>
<td><p><span class="math notranslate nohighlight">\(\star\)</span></p></td>
<td><p>Choose the variable with the smallest domain.</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">anti_first_fail</tt></p></td>
<td></td>
<td><p>Choose the variable with the largest domain.</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">smallest</tt></p></td>
<td></td>
<td><p>Choose the variable with the smallest value in its domain.</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">largest</tt></p></td>
<td></td>
<td><p>Choose the variable with the largest value in its domain.</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">occurrence</tt></p></td>
<td></td>
<td><p>Choose the variable with the largest number of attached constraints.</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">most_constrained</tt></p></td>
<td></td>
<td><p>Choose the variable with the smallest domain, breaking ties using the number of constraints.</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">max_regret</tt></p></td>
<td></td>
<td><p>Choose the variable with the largest difference between the two smallest values in its domain.</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">dom_w_deg</tt></p></td>
<td></td>
<td><p>Choose the variable with the smallest value of domain size divided by weighted degree,
where the weighted degree is the number of times the variables been in a constraint which failed</p></td>
</tr>
</tbody>
</table>
<p><code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;assignmentannotation&gt;</span></code> specifies how the chosen variable should be
constrained.
Possible choices are as follows (it is recommended that implementations
support at least the starred options):</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><tt class="docutils literal">indomain_min</tt></p></td>
<td><p><span class="math notranslate nohighlight">\(\star\)</span></p></td>
<td><p>Assign the smallest value in the variable’s domain.</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">indomain_max</tt></p></td>
<td><p><span class="math notranslate nohighlight">\(\star\)</span></p></td>
<td><p>Assign the largest value in the variable’s domain.</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">indomain_middle</tt></p></td>
<td></td>
<td><p>Assign the value in the variable’s domain closest to the mean of its current bounds.</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">indomain_median</tt></p></td>
<td></td>
<td><p>Assign the middle value in the variable’s domain.</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">indomain</tt></p></td>
<td></td>
<td><p>Nondeterministically assign values to the variable in ascending order.</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">indomain_random</tt></p></td>
<td></td>
<td><p>Assign a random value from the variable’s domain.</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">indomain_split</tt></p></td>
<td></td>
<td><p>Bisect the variable’s domain, excluding the upper half first.</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">indomain_reverse_split</tt></p></td>
<td></td>
<td><p>Bisect the variable’s domain, excluding the lower half first.</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">indomain_interval</tt></p></td>
<td></td>
<td><p>If the variable’s domain consists of several contiguous intervals,
reduce the domain to the first interval. Otherwise just split the variable’s domain.</p></td>
</tr>
</tbody>
</table>
<p>Of course, not all assignment strategies make sense for all search
annotations (e.g., <tt class="docutils literal">bool_search</tt> and <tt class="docutils literal">indomain_split</tt>).</p>
<p>Finally, <code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;strategyannotation&gt;</span></code> specifies a search strategy;
implementations should at least support <tt class="docutils literal">complete</tt> (i.e., exhaustive
search).</p>
</section>
<section id="output-annotations">
<h4>Output annotations<a class="headerlink" href="#output-annotations" title="Link to this heading"></a></h4>
<p>Model output is specified through variable annotations.
Non-array output variables are annotated with
<tt class="docutils literal">output_var</tt>.
Array output variables are annotated with
<tt class="docutils literal">output_array([</tt> <span class="math notranslate nohighlight">\(1\)</span> <tt class="docutils literal">..</tt> <span class="math notranslate nohighlight">\(x\)</span> `` ])``
where <span class="math notranslate nohighlight">\(1\)</span> <tt class="docutils literal">..</tt> <span class="math notranslate nohighlight">\(x\)</span> is the index set range of the array.
See <a class="reference internal" href="#ch-fzn-output"><span class="std std-numref">节 4.3.3</span></a> for details on the output format.</p>
</section>
<section id="variable-definition-annotations">
<h4>Variable definition annotations<a class="headerlink" href="#variable-definition-annotations" title="Link to this heading"></a></h4>
<p>To support solvers capable of exploiting functional relationships, a
variable defined as a function of other variables may be annotated thus:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="kt">var</span><span class="s"> </span><span class="kt">int</span><span class="p">:</span><span class="s"> </span><span class="nv">x</span><span class="s"> </span><span class="p">::</span><span class="s"> </span><span class="nv">is_defined_var</span><span class="p">;</span>

<span class="s">...</span>

<span class="k">constraint</span><span class="s"> </span><span class="nf">int_plus</span><span class="p">(</span><span class="nv">y</span><span class="p">,</span><span class="s"> </span><span class="nv">z</span><span class="p">,</span><span class="s"> </span><span class="nv">x</span><span class="p">)</span><span class="s"> </span><span class="p">::</span><span class="s"> </span><span class="nf">defines_var</span><span class="p">(</span><span class="nv">x</span><span class="p">);</span>
</pre></div>
</div>
<p>(The <tt class="docutils literal">defines_var</tt> annotation should appear on exactly one
constraint.)
This allows a solver to represent <tt class="docutils literal">x</tt> internally as a representation
of <tt class="docutils literal">y+z</tt> rather than as a separate constrained variable.
The <tt class="docutils literal">is_defined_var</tt> annotation on the declaration of <tt class="docutils literal">x</tt>
provides “early warning” to the solver that such an option is
available.</p>
</section>
<section id="intermediate-variables">
<h4>Intermediate variables<a class="headerlink" href="#intermediate-variables" title="Link to this heading"></a></h4>
<p>Intermediate variables introduced during conversion of a MiniZinc
model to FlatZinc may be annotated thus:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="kt">var</span><span class="s"> </span><span class="kt">int</span><span class="p">:</span><span class="s"> </span><span class="nv">X_INTRODUCED_3</span><span class="s"> </span><span class="p">::</span><span class="s"> </span><span class="nv">var_is_introduced</span><span class="p">;</span>
</pre></div>
</div>
<p>This information is potentially useful to the solver’s search strategy.</p>
</section>
<section id="constraint-annotations">
<h4>Constraint annotations<a class="headerlink" href="#constraint-annotations" title="Link to this heading"></a></h4>
<p>Annotations can be placed on constraints advising the solver how the
constraint should be implemented.
Here are some constraint annotations supported by some solvers:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><tt class="docutils literal">bounds</tt></p></td>
<td><dl class="simple">
<dt>Use bounds propagation. The concrete propagation strength is not further</dt><dd><p>specified.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">boundsZ</tt></p></td>
<td><p>Use integer bounds propagation.</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">boundsR</tt></p></td>
<td><p>Use real bounds propagation.</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">boundsD</tt></p></td>
<td><p>A tighter version of <tt class="docutils literal">boundsZ</tt> where support for the bounds must exist.</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">domain</tt></p></td>
<td><p>Use domain propagation.</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">value_propagation</tt></p></td>
<td><p>Use value propagation.</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">priority(k)</tt></p></td>
<td><p>where <tt class="docutils literal">k</tt> is an integer constant indicating propagator priority.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="specification-of-flatzinc-json">
<span id="ch-fzn-json"></span><h2><span class="section-number">4.3.2. </span>Specification of FlatZinc-JSON<a class="headerlink" href="#specification-of-flatzinc-json" title="Link to this heading"></a></h2>
<p>FlatZinc-JSON is an alternative syntax for FlatZinc that is compatible with the JSON data format. Solvers can indicate that they require FlatZinc output in their solver configuration files (see <a class="reference internal" href="#sec-cmdline-conffiles"><span class="std std-numref">节 4.3.6</span></a>) using the <cite>inputType</cite> property.</p>
<p>The JSON representation of FlatZinc contains the same elements as a FlatZinc file: declarations of variables, arrays, constraints and a solve item. A full specification is given as a JSON schema at the end of this section.
Here is an example of the cake optimisation model from <a class="reference internal" href="modelling.html#ex-cakes"><span class="std std-numref">列表 2.1.2</span></a>, compiled into FlatZinc-JSON:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;variables&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;b&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;int&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;domain&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]]</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;c&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;int&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;domain&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">]]</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;X_INTRODUCED_0_&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;int&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;domain&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">85000</span><span class="p">]],</span><span class="w"> </span><span class="nt">&quot;defined&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;arrays&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;X_INTRODUCED_2_&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;a&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">250</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">]</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;X_INTRODUCED_6_&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;a&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">75</span><span class="p">,</span><span class="w"> </span><span class="mi">150</span><span class="p">]</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;X_INTRODUCED_8_&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;a&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">150</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;constraints&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;int_lin_le&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;args&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;X_INTRODUCED_2_&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="p">],</span><span class="w"> </span><span class="mi">4000</span><span class="p">]},</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;int_lin_le&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;args&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;X_INTRODUCED_6_&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="p">],</span><span class="w"> </span><span class="mi">2000</span><span class="p">]},</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;int_lin_le&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;args&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;X_INTRODUCED_8_&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="p">],</span><span class="w"> </span><span class="mi">500</span><span class="p">]},</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;int_lin_eq&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;args&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[[</span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="mi">450</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;X_INTRODUCED_0_&quot;</span><span class="p">],</span><span class="w"> </span><span class="mi">0</span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;ann&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;ctx_pos&quot;</span><span class="p">],</span><span class="w"> </span><span class="nt">&quot;defines&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;X_INTRODUCED_0_&quot;</span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;output&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;solve&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;method&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;maximize&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;objective&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;X_INTRODUCED_0_&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>There are a number of small differences compared to FlatZinc:</p>
<ul class="simple">
<li><p>Variables and arrays are declared separately. Each variable must have an identifier and a type, and can optionally have a domain, a flag indicating that the variable was introduced by compilation, a flag that the variable is functionally defined by a constraint, and a property <tt class="docutils literal">"rhs"</tt> to define the “right hand side” of the variable, i.e., its value or alias to another variable.</p></li>
<li><p>Domains are written as lists of contiguous, ordered, non-overlapping ranges. E.g., the set <code class="code mzn minizinc docutils literal highlight highlight-minizinc"><span></span><span class="p">{</span><span class="m">1,2</span><span class="p">,</span><span class="m">4,6</span><span class="p">,</span><span class="m">7</span><span class="p">}</span></code> would be written as <tt class="docutils literal">[[1,2],[4,4],[6,7]]</tt>.</p></li>
<li><p>Arrays are declared with an identifier and an object that has the property <tt class="docutils literal">"a"</tt>, which maps to the actual array. Arrays can contain numeric literals or identifiers (written as strings).</p></li>
<li><p>Constraints are declared as objects with a property <tt class="docutils literal">"id"</tt> indicating the name of the constraint, a property <tt class="docutils literal">"args"</tt> for the array of arguments to the constraint, and an optional property <tt class="docutils literal">"defines"</tt> that indicates the variable identifier that this constraint functionally defines.</p></li>
<li><p>The <tt class="docutils literal">"output"</tt> property is a list of all identifiers for which the solver must produce output for each solution. The output must follow the normal FlatZinc output rules as defined in <a class="reference internal" href="#ch-fzn-output"><span class="std std-numref">节 4.3.3</span></a>.</p></li>
<li><p>The <tt class="docutils literal">"solve"</tt> property maps to an object with a property <tt class="docutils literal">"method"</tt> that indicates whether the problem is a satisfaction problem (<tt class="docutils literal">"satisfy"</tt>) or an optimisation problem (<tt class="docutils literal">"minimize"</tt> or <tt class="docutils literal">"maximize"</tt>), in which case the <tt class="docutils literal">"objective"</tt> property must be present, which maps to an identifier.</p></li>
<li><p>Variables, arrays, constraints and the solve item can have an optional list of annotations, indicated by the <tt class="docutils literal">"ann"</tt> property. Atomic annotations (such as <tt class="docutils literal">indomain_min</tt>) are represented simply as strings. Non-atomic annotations (such as <tt class="docutils literal">int_search</tt>) follow the same syntax as constraints, i.e., an object with <tt class="docutils literal">"id"</tt> and <tt class="docutils literal">"args"</tt> properties.</p></li>
<li><p>String literals can occur in FlatZinc as arguments to annotations or special solver-defined predicates. In FlatZinc-JSON, these string literals are represented as objects <tt class="docutils literal">{ "string" : "<string contents>" }</tt>.</p></li>
</ul>
<p>The full schema is listed below, and is available from <a class="reference external" href="https://www.minizinc.org/schemas/fznjson">https://www.minizinc.org/schemas/fznjson</a>.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;$schema&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://json-schema.org/draft-04/schema#&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;$id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://www.minizinc.org/schemas/fznjson&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;title&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FlatZincJSON&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;A JSON representation of a FlatZinc model&quot;</span><span class="p">,</span>

<span class="w">  </span><span class="nt">&quot;$defs&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;identifier&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;pattern&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;[A-Za-z][A-Za-z0-9_]*&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;literal&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;oneOf&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/identifier&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;boolean&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;properties&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;set&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;items&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;items&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                          </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">                          </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">                        </span><span class="p">]</span><span class="w">        </span>
<span class="w">                       </span><span class="p">}</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;required&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;set&quot;</span><span class="w"> </span><span class="p">]</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;properties&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;string&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;required&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"> </span><span class="p">]</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">]},</span>
<span class="w">    </span><span class="nt">&quot;literals&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;items&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/literal&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;argument&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;oneOf&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/literals&quot;</span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/literal&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">]},</span>
<span class="w">    </span><span class="nt">&quot;annotation&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;oneOf&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/annotationCall&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">]},</span>
<span class="w">    </span><span class="nt">&quot;annotations&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;items&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/annotation&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;annotationArgument&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;oneOf&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/annotationLiterals&quot;</span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/annotationLiteral&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">]},</span>
<span class="w">    </span><span class="nt">&quot;annotationCall&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;properties&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/identifier&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/annotationArgument&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;id&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;args&quot;</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;annotationLiterals&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;items&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/annotationLiteral&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;annotationLiteral&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;oneOf&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/literal&quot;</span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/annotationCall&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">]},</span>
<span class="w">    </span><span class="nt">&quot;domain&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;items&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;items&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>

<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;variables&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;patternProperties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;[A-Za-z][A-Za-z0-9_]*&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;enum&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">&quot;bool&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;float&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;int&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;set of int&quot;</span>
<span class="w">               </span><span class="p">]</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;domain&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/domain&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;rhs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/literal&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;introduced&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;boolean&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;defined&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;boolean&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;ann&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/annotations&quot;</span><span class="p">}</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="s2">&quot;type&quot;</span>
<span class="w">          </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;arrays&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;patternProperties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;[A-Za-z][A-Za-z0-9_]*&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;a&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/literal&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;ann&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/annotations&quot;</span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;introduced&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;boolean&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;defined&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;boolean&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="s2">&quot;a&quot;</span>
<span class="w">          </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;constraints&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;properties&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/identifier&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/argument&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;ann&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/annotations&quot;</span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;defines&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/identifier&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="s2">&quot;id&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;args&quot;</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;output&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/identifier&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;solve&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;enum&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;satisfy&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;minimize&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;maximize&quot;</span><span class="w"> </span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;objective&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/literal&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;ann&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/annotations&quot;</span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;method&quot;</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;version&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;variables&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;arrays&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;output&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;constraints&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;solve&quot;</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="output">
<span id="ch-fzn-output"></span><h2><span class="section-number">4.3.3. </span>Output<a class="headerlink" href="#output" title="Link to this heading"></a></h2>
<p>An implementation can produce three types of output: solutions, statistics, and errors.</p>
<section id="solution-output">
<h3><span class="section-number">4.3.3.1. </span>Solution output<a class="headerlink" href="#solution-output" title="Link to this heading"></a></h3>
<p>An implementation must output values for all and only the variables
annotated with <tt class="docutils literal">output_var</tt> or <tt class="docutils literal">output_array</tt> (output
annotations must not appear on parameters) in a FlatZinc model, or those variables and arrays whose identifiers are listed in the <tt class="docutils literal">"output"</tt> property of a FlatZinc-JSON model. Output must be printed to
the standard output stream.</p>
<p>For example:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="kt">var</span><span class="s"> </span><span class="m">1</span><span class="o">..</span><span class="m">10</span><span class="p">:</span><span class="s"> </span><span class="nv">x</span><span class="s"> </span><span class="p">::</span><span class="s"> </span><span class="nv">output_var</span><span class="p">;</span>
<span class="kt">var</span><span class="s"> </span><span class="m">1</span><span class="o">..</span><span class="m">10</span><span class="p">:</span><span class="s"> </span><span class="nv">y</span><span class="p">;</span><span class="s">       </span><span class="c">% y is not output.</span>
<span class="kt">array</span><span class="s"> </span><span class="p">[</span><span class="m">1</span><span class="o">..</span><span class="m">4</span><span class="p">]</span><span class="s"> </span><span class="kt">of</span><span class="s"> </span><span class="kt">var</span><span class="s"> </span><span class="kt">int</span><span class="p">:</span><span class="s"> </span><span class="nv">zs</span><span class="s"> </span><span class="p">::</span><span class="s"> </span><span class="nf">output_array</span><span class="p">([</span><span class="m">1</span><span class="o">..</span><span class="m">4</span><span class="p">]);</span>
</pre></div>
</div>
<p>All non-error output must be sent to the standard output stream.</p>
<p>Output must take the following form:</p>
<div class="highlight-minizincdef notranslate"><div class="highlight"><pre><span></span><span class="cs">&lt;var-par-identifier&gt;</span><span class="s"> </span><span class="o">=</span><span class="s"> </span><span class="cs">&lt;basic-literal-expr&gt;</span><span class="s"> </span><span class="p">;</span>
</pre></div>
</div>
<p>or, for array variables,</p>
<div class="highlight-minizincdef notranslate"><div class="highlight"><pre><span></span><span class="cs">&lt;var-par-identifier&gt;</span><span class="s"> </span><span class="o">=</span><span class="s"> </span><span class="sr">[&lt;y1&gt;, &lt;y2&gt;, ... &lt;yk&gt;]</span><span class="p">;</span>
</pre></div>
</div>
<p>where <code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;y1&gt;</span><span class="p">,</span><span class="s"> </span><span class="cs">&lt;y2&gt;</span><span class="p">,</span><span class="s"> ... </span><span class="cs">&lt;yk&gt;</span></code> are literals of the element type.</p>
<p><strong>Note</strong>: The argument to the <code class="code mzn minizinc docutils literal highlight highlight-minizinc"><span></span><span class="nv">output_array</span></code> annotation is kept for compatibility with older versions of FlatZinc. Previous versions of the MiniZinc compiler generated multi-dimensional <code class="code mzn minizinc docutils literal highlight highlight-minizinc"><span></span><span class="nv">output_array</span></code> annotations, and required the solver to output corresponding <code class="code mzn minizinc docutils literal highlight highlight-minizinc"><span></span><span class="nv">arrayNd</span></code> calls (with <code class="code mzn minizinc docutils literal highlight highlight-minizinc"><span></span><span class="nv">N</span></code> being the number of dimensions). Starting from MiniZinc version 2.7.8, all <code class="code mzn minizinc docutils literal highlight highlight-minizinc"><span></span><span class="nv">output_array</span></code> annotations are guaranteed to be one-dimensional and 1-based, so that no <code class="code mzn minizinc docutils literal highlight highlight-minizinc"><span></span><span class="nv">arrayNd</span></code> calls are required.</p>
<p>Using this format, the output of a FlatZinc model solution is
suitable for input to a MiniZinc model as a data file (this is why
parameters are not included in the output).</p>
<p>Implementations must ensure that <em>all</em> model variables (not
just the output variables) have satisfying assignments before printing a
solution.</p>
<p>The output for a solution must be terminated with ten consecutive
minus signs on a separate line: <tt class="docutils literal">----------</tt>.</p>
<p>Multiple solutions may be output, one after the other, as search
proceeds. How many solutions should be output depends on the mode the solver is run in as controlled by the <tt class="docutils literal">-a</tt> command line flag (see <a class="reference internal" href="#fzn-cmdline-options"><span class="std std-numref">节 4.3.5</span></a>).</p>
<p>If at least one solution has been found and search then terminates
having explored the whole search space, then ten
consecutive equals signs should be printed on a separate line:
<tt class="docutils literal">==========</tt>.</p>
<p>If no solutions have been found and search terminates having explored
the whole search space, then <tt class="docutils literal">=====UNSATISFIABLE=====</tt> should be
printed on a separate line.</p>
<p>If the objective of an optimization problem is unbounded, then
<tt class="docutils literal">=====UNBOUNDED=====</tt> should be printed on a separate line.</p>
<p>If no solutions have been found and search terminates having
<em>not</em> explored the whole search space, then
<tt class="docutils literal">=====UNKNOWN=====</tt> should be printed on a separate line.</p>
<p>Implementations may output further information about the solution(s),
or lack thereof, in the form of FlatZinc comments.</p>
<p>Examples:</p>
<p>Asking for a single solution to this model:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="kt">var</span><span class="s"> </span><span class="m">1</span><span class="o">..</span><span class="m">3</span><span class="p">:</span><span class="s"> </span><span class="nv">x</span><span class="s"> </span><span class="p">::</span><span class="s"> </span><span class="nv">output_var</span><span class="p">;</span>
<span class="k">solve</span><span class="s"> </span><span class="k">satisfy</span>
</pre></div>
</div>
<p>might produce this output:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="nv">x</span><span class="s"> </span><span class="o">=</span><span class="s"> </span><span class="m">1</span><span class="p">;</span>
<span class="o">----------</span>
</pre></div>
</div>
<p>Asking for all solutions to this model:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="kt">array</span><span class="s"> </span><span class="p">[</span><span class="m">1</span><span class="o">..</span><span class="m">2</span><span class="p">]</span><span class="s"> </span><span class="kt">of</span><span class="s"> </span><span class="kt">var</span><span class="s"> </span><span class="m">1</span><span class="o">..</span><span class="m">3</span><span class="p">:</span><span class="s"> </span><span class="nv">xs</span><span class="s"> </span><span class="p">::</span><span class="s"> </span><span class="nf">output_array</span><span class="p">([</span><span class="m">1</span><span class="o">..</span><span class="m">2</span><span class="p">]);</span>
<span class="k">constraint</span><span class="s"> </span><span class="nf">int_lt</span><span class="p">(</span><span class="nv">xs</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="s"> </span><span class="nv">xs</span><span class="p">[</span><span class="m">2</span><span class="p">]);</span><span class="s">    </span><span class="c">% x[1] &lt; x[2].</span>
<span class="k">solve</span><span class="s"> </span><span class="k">satisfy</span>
</pre></div>
</div>
<p>might produce this output:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="nv">xs</span><span class="s"> </span><span class="o">=</span><span class="s"> </span><span class="nb">array1d</span><span class="p">(</span><span class="m">1</span><span class="o">..</span><span class="m">2</span><span class="p">,</span><span class="s"> </span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="s"> </span><span class="m">2</span><span class="p">]);</span>
<span class="o">----------</span>
<span class="nv">xs</span><span class="s"> </span><span class="o">=</span><span class="s"> </span><span class="nb">array1d</span><span class="p">(</span><span class="m">1</span><span class="o">..</span><span class="m">2</span><span class="p">,</span><span class="s"> </span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="s"> </span><span class="m">3</span><span class="p">]);</span>
<span class="o">----------</span>
<span class="nv">xs</span><span class="s"> </span><span class="o">=</span><span class="s"> </span><span class="nb">array1d</span><span class="p">(</span><span class="m">1</span><span class="o">..</span><span class="m">2</span><span class="p">,</span><span class="s"> </span><span class="p">[</span><span class="m">2</span><span class="p">,</span><span class="s"> </span><span class="m">3</span><span class="p">]);</span>
<span class="o">----------</span>
<span class="o">==========</span>
</pre></div>
</div>
<p>Asking for a single solution to this model:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="kt">var</span><span class="s"> </span><span class="m">1</span><span class="o">..</span><span class="m">10</span><span class="p">:</span><span class="s"> </span><span class="nv">x</span><span class="s"> </span><span class="p">::</span><span class="s"> </span><span class="nv">output_var</span><span class="p">;</span>
<span class="k">solve</span><span class="s"> </span><span class="k">maximize</span><span class="s"> </span><span class="nv">x</span><span class="p">;</span>
</pre></div>
</div>
<p>should produce this output:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="nv">x</span><span class="s"> </span><span class="o">=</span><span class="s"> </span><span class="m">10</span><span class="p">;</span>
<span class="o">----------</span>
<span class="o">==========</span>
</pre></div>
</div>
<p>The row of equals signs indicates that a complete search was performed
and that the last result printed is the optimal solution.</p>
<p>Running a solver on this model with some termination condition (such as a very short time-out):</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="kt">var</span><span class="s"> </span><span class="m">1</span><span class="o">..</span><span class="m">10</span><span class="p">:</span><span class="s"> </span><span class="nv">x</span><span class="s"> </span><span class="p">::</span><span class="s"> </span><span class="nv">output_var</span><span class="p">;</span>
<span class="k">solve</span><span class="s"> </span><span class="k">maximize</span><span class="s"> </span><span class="nv">x</span><span class="p">;</span>
</pre></div>
</div>
<p>might produce this output:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="nv">x</span><span class="s"> </span><span class="o">=</span><span class="s"> </span><span class="m">1</span><span class="p">;</span>
<span class="o">----------</span>
<span class="nv">x</span><span class="s"> </span><span class="o">=</span><span class="s"> </span><span class="m">2</span><span class="p">;</span>
<span class="o">----------</span>
<span class="nv">x</span><span class="s"> </span><span class="o">=</span><span class="s"> </span><span class="m">3</span><span class="p">;</span>
<span class="o">----------</span>
</pre></div>
</div>
<p>Because the output does not finish with <tt class="docutils literal">==========</tt>, search did not
finish, hence these results must be interpreted as approximate solutions
to the optimization problem.</p>
<p>Asking for a solution to this model:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="kt">var</span><span class="s"> </span><span class="m">1</span><span class="o">..</span><span class="m">3</span><span class="p">:</span><span class="s"> </span><span class="nv">x</span><span class="s"> </span><span class="p">::</span><span class="s"> </span><span class="nv">output_var</span><span class="p">;</span>
<span class="kt">var</span><span class="s"> </span><span class="m">4</span><span class="o">..</span><span class="m">6</span><span class="p">:</span><span class="s"> </span><span class="nv">y</span><span class="s"> </span><span class="p">::</span><span class="s"> </span><span class="nv">output_var</span><span class="p">;</span>
<span class="k">constraint</span><span class="s"> </span><span class="nf">int_lt</span><span class="p">(</span><span class="nv">y</span><span class="p">,</span><span class="s"> </span><span class="nv">x</span><span class="p">);</span><span class="s">    </span><span class="c">% y &lt; x.</span>
<span class="k">solve</span><span class="s"> </span><span class="k">satisfy</span><span class="p">;</span>
</pre></div>
</div>
<p>should produce this output:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="o">=====</span><span class="nv">UNSATISFIABLE</span><span class="o">=====</span>
</pre></div>
</div>
<p>indicating that a complete search was performed and no solutions were
found (i.e., the problem is unsatisfiable).</p>
</section>
<section id="statistics-output">
<span id="ch-fzn-statistics"></span><h3><span class="section-number">4.3.3.2. </span>Statistics output<a class="headerlink" href="#statistics-output" title="Link to this heading"></a></h3>
<p>FlatZinc solvers can output statistics in a standard format so that it can be read by scripts,
for example, in order to run experiments and automatically aggregate the results.
Statistics should be printed to the standard output stream in the form of FlatZinc comments that follow a specific format.
Statistics can be output at any time during the solving, i.e., before the first solution, between solutions,
and after the search has finished. Statistics output corresponding to a solution should be the last one
before its ‘———-’ separator.</p>
<p>Each value should be output on a line of its own in the following format:</p>
<div class="highlight-minizincdef notranslate"><div class="highlight"><pre><span></span><span class="c">%%%mzn-stat: &lt;name&gt;=&lt;value&gt;</span>
</pre></div>
</div>
<p>Each block of statistics is terminated by a line of its own with the following format:</p>
<div class="highlight-minizincdef notranslate"><div class="highlight"><pre><span></span><span class="c">%%%mzn-stat-end</span>
</pre></div>
</div>
<p><strong>Example</strong></p>
<div class="highlight-minizincdef notranslate"><div class="highlight"><pre><span></span><span class="c">%%%mzn-stat: objective=1e+308</span>
<span class="c">%%%mzn-stat: objectiveBound=0</span>
<span class="c">%%%mzn-stat: nodes=0</span>
<span class="c">%%%mzn-stat: solveTime=2.3567</span>
<span class="c">%%%mzn-stat-end</span>

<span class="p">(</span><span class="nv">no</span><span class="s"> </span><span class="nv">feasible</span><span class="s"> </span><span class="nv">solution</span><span class="s"> </span><span class="nv">found</span><span class="s"> </span><span class="nv">yet</span><span class="s"> </span><span class="nv">but</span><span class="s"> </span><span class="nv">something</span><span class="s"> </span><span class="nv">can</span><span class="s"> </span><span class="nv">be</span><span class="s"> </span><span class="nv">printed</span><span class="s">...</span><span class="p">)</span>

<span class="c">%%%mzn-stat: objective=12345</span>
<span class="c">%%%mzn-stat: objectiveBound=122</span>
<span class="c">%%%mzn-stat: nodes=35</span>
<span class="c">%%%mzn-stat: solveTime=78.5799</span>
<span class="c">%%%mzn-stat-end</span>

<span class="p">(</span><span class="nv">the</span><span class="s"> </span><span class="nv">corresponding</span><span class="s"> </span><span class="nv">feasible</span><span class="s"> </span><span class="nv">solution</span><span class="s"> </span><span class="nv">with</span><span class="s"> </span><span class="nv">value</span><span class="s"> </span><span class="m">12345</span><span class="s"> </span><span class="nv">goes</span><span class="s"> </span><span class="nv">here</span>
<span class="s">   </span><span class="nv">or</span><span class="s"> </span><span class="nv">before</span><span class="s"> </span><span class="nv">its</span><span class="s"> </span><span class="nv">statistics</span><span class="s"> </span><span class="nv">but</span><span class="s"> </span><span class="nv">above</span><span class="s"> </span><span class="nv">the</span><span class="s"> </span><span class="nv">separator</span><span class="p">)</span>
<span class="o">----------</span><span class="s">               </span><span class="p">(</span><span class="o">&lt;-</span><span class="s"> </span><span class="nv">the</span><span class="s"> </span><span class="nv">solution</span><span class="s"> </span><span class="nv">separator</span><span class="p">)</span>

<span class="c">%%%mzn-stat: objective=379</span>
<span class="c">%%%mzn-stat: objectiveBound=379</span>
<span class="c">%%%mzn-stat: nodes=4725</span>
<span class="c">%%%mzn-stat: solveTime=178.5799</span>
<span class="c">%%%mzn-stat-end</span>

<span class="p">(</span><span class="nv">the</span><span class="s"> </span><span class="nv">corr</span><span class="s">. </span><span class="nv">optimal</span><span class="s"> </span><span class="nv">solution</span><span class="s"> </span><span class="nv">with</span><span class="s"> </span><span class="nv">value</span><span class="s"> </span><span class="m">379</span><span class="s"> </span><span class="nv">goes</span><span class="s"> </span><span class="nv">here</span><span class="p">)</span>
<span class="o">----------</span>
<span class="o">==========</span><span class="s">               </span><span class="p">(</span><span class="o">&lt;-</span><span class="s"> </span><span class="nv">the</span><span class="s"> </span><span class="nv">&#39;search complete&#39;</span><span class="s"> </span><span class="nv">marker</span><span class="p">)</span>

<span class="c">%%%mzn-stat: objective=379      (&lt;- this is the concluding output)</span>
<span class="c">%%%mzn-stat: objectiveBound=379</span>
<span class="c">%%%mzn-stat: nodes=13456</span>
<span class="c">%%%mzn-stat: solveTime=2378.5799</span>
<span class="c">%%%mzn-stat-end</span>
</pre></div>
</div>
<p>The <code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;name&gt;</span></code> describes the kind of statistics gathered, and the <code class="code mzndef minizincdef docutils literal highlight highlight-minizincdef"><span></span><span class="cs">&lt;value&gt;</span></code> can be any value of a MiniZinc type.
The following names are considered standard statistics:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Explanation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><tt class="docutils literal">nodes</tt></p></td>
<td><p>int</p></td>
<td><p>Number of search nodes</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">openNodes</tt></p></td>
<td><p>int</p></td>
<td><p>Number of open search nodes</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">objective</tt></p></td>
<td><p>float</p></td>
<td><p>Current objective value</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">objectiveBound</tt></p></td>
<td><p>float</p></td>
<td><p>Dual bound on the objective value</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">failures</tt></p></td>
<td><p>int</p></td>
<td><p>Number of leaf nodes that were failed</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">restarts</tt></p></td>
<td><p>int</p></td>
<td><p>Number of times the solver restarted the search</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">variables</tt></p></td>
<td><p>int</p></td>
<td><p>Number of variables</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">intVariables</tt></p></td>
<td><p>int</p></td>
<td><p>Number of integer variables created</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">boolVariables</tt></p></td>
<td><p>int</p></td>
<td><p>Number of bool variables created</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">floatVariables</tt></p></td>
<td><p>int</p></td>
<td><p>Number of float variables created</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">setVariables</tt></p></td>
<td><p>int</p></td>
<td><p>Number of set variables created</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">propagators</tt></p></td>
<td><p>int</p></td>
<td><p>Number of propagators created</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">propagations</tt></p></td>
<td><p>int</p></td>
<td><p>Number of propagator invocations</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">peakDepth</tt></p></td>
<td><p>int</p></td>
<td><p>Peak depth of search tree</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">nogoods</tt></p></td>
<td><p>int</p></td>
<td><p>Number of nogoods created</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">backjumps</tt></p></td>
<td><p>int</p></td>
<td><p>Number of backjumps</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">peakMem</tt></p></td>
<td><p>float</p></td>
<td><p>Peak memory (in Mbytes)</p></td>
</tr>
<tr class="row-odd"><td><p><tt class="docutils literal">initTime</tt></p></td>
<td><p>float</p></td>
<td><p>Initialisation time (in seconds)</p></td>
</tr>
<tr class="row-even"><td><p><tt class="docutils literal">solveTime</tt></p></td>
<td><p>float</p></td>
<td><p>Solving time (in seconds)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="error-and-warning-output">
<h3><span class="section-number">4.3.3.3. </span>Error and warning output<a class="headerlink" href="#error-and-warning-output" title="Link to this heading"></a></h3>
<p>Errors and warnings must be output to the standard error stream. When an error occurs, the implementation should exit with a non-zero exit code, signaling failure.</p>
</section>
</section>
<section id="solver-specific-libraries">
<span id="ch-solver-specific-libraries"></span><h2><span class="section-number">4.3.4. </span>Solver-specific Libraries<a class="headerlink" href="#solver-specific-libraries" title="Link to this heading"></a></h2>
<p>Constraints in FlatZinc can call standard predicates as well as solver-specific predicates. Standard predicates are the ones that the MiniZinc compiler assumes to be present in all solvers. Without further customisation, the compiler will try to compile the entire model into a set of these standard predicates.</p>
<p>Solvers can use custom predicates and <em>redefine</em> standard predicates by supplying a <em>solver specific library</em> of predicate declarations. Examples of such libraries can be found in the binary distribution of MiniZinc, inside the <tt class="docutils literal">share/minizinc/gecode</tt> and <tt class="docutils literal">share/minizinc/chuffed</tt> directories.</p>
<p>The solver-specific library needs to be made available to the MiniZinc compiler by specifying its location in the solver’s configuration file, see <a class="reference internal" href="#sec-cmdline-conffiles"><span class="std std-numref">节 4.3.6</span></a>.</p>
<section id="standard-predicates">
<h3><span class="section-number">4.3.4.1. </span>Standard predicates<a class="headerlink" href="#standard-predicates" title="Link to this heading"></a></h3>
<p>FlatZinc solvers need to support the predicates listed as <tt class="docutils literal">FlatZinc builtins</tt> in the library reference documentation, see <a class="reference internal" href="lib-flatzinc.html#ch-lib-flatzinc"><span class="std std-numref">节 4.2.3</span></a>.</p>
<p>Any standard predicate that is not supported by a solver needs to be <em>redefined</em>. This can be achieved by placing a file called <tt class="docutils literal">redefinitions.mzn</tt> in the solver’s MiniZinc library, which can contain alternative definitions of predicates, or define them as unsupported using the <tt class="docutils literal">abort</tt> predicate.</p>
<p>Example for a <tt class="docutils literal">redefinitions.mzn</tt>:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="c">% Redefine float_sinh function in terms of exp</span>
<span class="k">predicate</span><span class="s"> </span><span class="nf">float_sinh</span><span class="p">(</span><span class="kt">var</span><span class="s"> </span><span class="kt">float</span><span class="p">:</span><span class="s"> </span><span class="nv">a</span><span class="p">,</span><span class="s"> </span><span class="kt">var</span><span class="s"> </span><span class="kt">float</span><span class="p">:</span><span class="s"> </span><span class="nv">b</span><span class="p">)</span><span class="s"> </span><span class="o">=</span>
<span class="s">    </span><span class="nv">b</span><span class="s"> </span><span class="o">==</span><span class="s"> </span><span class="p">(</span><span class="nb">exp</span><span class="p">(</span><span class="nv">a</span><span class="p">)</span><span class="o">-</span><span class="nb">exp</span><span class="p">(</span><span class="o">-</span><span class="nv">a</span><span class="p">))</span><span class="o">/</span><span class="m">2.0</span><span class="p">;</span>

<span class="c">% Mark float_tanh as unsupported</span>
<span class="k">predicate</span><span class="s"> </span><span class="nf">float_tanh</span><span class="p">(</span><span class="kt">var</span><span class="s"> </span><span class="kt">float</span><span class="p">:</span><span class="s"> </span><span class="nv">a</span><span class="p">,</span><span class="s"> </span><span class="kt">var</span><span class="s"> </span><span class="kt">float</span><span class="p">:</span><span class="s"> </span><span class="nv">b</span><span class="p">)</span><span class="s"> </span><span class="o">=</span>
<span class="s">    </span><span class="nb">abort</span><span class="p">(</span><span class="s">&quot;The builtin float_tanh is not supported by this solver.&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>The redefinition can use the full MiniZinc language. Note, however, that redefining builtin predicates in terms of MiniZinc expressions can lead to problems if the MiniZinc compiler translates the high-level expression back to the redefined builtin.</p>
<p>The reference documentation (<a class="reference internal" href="lib-flatzinc.html#ch-lib-flatzinc"><span class="std std-numref">节 4.2.3</span></a>) also contains sections on builtins that were added in later versions of MiniZinc. In order to maintain backwards compatibility with solvers that don’t support these, they are organised in redefinition files with a version number attached, such as <tt class="docutils literal">redefinitions-2.0.mzn</tt>. In order to declare support for these builtins, the solver-specific library must contain the corresponding redefinitions file, with the predicates either redefined in terms of other predicates, or declared as supported natively by the solver by providing a predicate declaration without a body.</p>
<p>Example for a <tt class="docutils literal">redefinitions-2.0.mzn</tt> that declares native support for the predicates added in MiniZinc 2.0:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="k">predicate</span><span class="s"> </span><span class="nf">bool_clause_reif</span><span class="p">(</span><span class="kt">array</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="s"> </span><span class="kt">of</span><span class="s"> </span><span class="kt">var</span><span class="s"> </span><span class="kt">bool</span><span class="p">:</span><span class="s"> </span><span class="nv">as</span><span class="p">,</span>
<span class="s">                           </span><span class="kt">array</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="s"> </span><span class="kt">of</span><span class="s"> </span><span class="kt">var</span><span class="s"> </span><span class="kt">bool</span><span class="p">:</span><span class="s"> </span><span class="nv">bs</span><span class="p">,</span>
<span class="s">                           </span><span class="kt">var</span><span class="s"> </span><span class="kt">bool</span><span class="p">:</span><span class="s"> </span><span class="nv">b</span><span class="p">);</span>
<span class="k">predicate</span><span class="s"> </span><span class="nf">array_int_maximum</span><span class="p">(</span><span class="kt">var</span><span class="s"> </span><span class="kt">int</span><span class="p">:</span><span class="s"> </span><span class="nv">m</span><span class="p">,</span><span class="s"> </span><span class="kt">array</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="s"> </span><span class="kt">of</span><span class="s"> </span><span class="kt">var</span><span class="s"> </span><span class="kt">int</span><span class="p">:</span><span class="s"> </span><span class="nv">x</span><span class="p">);</span>
<span class="k">predicate</span><span class="s"> </span><span class="nf">array_float_maximum</span><span class="p">(</span><span class="kt">var</span><span class="s"> </span><span class="kt">float</span><span class="p">:</span><span class="s"> </span><span class="nv">m</span><span class="p">,</span><span class="s"> </span><span class="kt">array</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="s"> </span><span class="kt">of</span><span class="s"> </span><span class="kt">var</span><span class="s"> </span><span class="kt">float</span><span class="p">:</span><span class="s"> </span><span class="nv">x</span><span class="p">);</span>
<span class="k">predicate</span><span class="s"> </span><span class="nf">array_int_minimum</span><span class="p">(</span><span class="kt">var</span><span class="s"> </span><span class="kt">int</span><span class="p">:</span><span class="s"> </span><span class="nv">m</span><span class="p">,</span><span class="s"> </span><span class="kt">array</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="s"> </span><span class="kt">of</span><span class="s"> </span><span class="kt">var</span><span class="s"> </span><span class="kt">int</span><span class="p">:</span><span class="s"> </span><span class="nv">x</span><span class="p">);</span>
<span class="k">predicate</span><span class="s"> </span><span class="nf">array_float_minimum</span><span class="p">(</span><span class="kt">var</span><span class="s"> </span><span class="kt">float</span><span class="p">:</span><span class="s"> </span><span class="nv">m</span><span class="p">,</span><span class="s"> </span><span class="kt">array</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="s"> </span><span class="kt">of</span><span class="s"> </span><span class="kt">var</span><span class="s"> </span><span class="kt">float</span><span class="p">:</span><span class="s"> </span><span class="nv">x</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="solver-specific-predicates">
<h3><span class="section-number">4.3.4.2. </span>Solver-specific predicates<a class="headerlink" href="#solver-specific-predicates" title="Link to this heading"></a></h3>
<p>Many solvers have built-in support for some of the constraints in the MiniZinc standard library. But without declaring which constraints they support, MiniZinc will assume that they don’t support any except for the standard FlatZinc builtins mentioned in the section above.</p>
<p>A solver can declare that it supports a non-standard constraint by overriding one of the files of the standard library in its own solver-specific library. For example, assume that a solver supports the <tt class="docutils literal">all_different</tt> constraint on integer variables. In the standard library, this constraint is defined in the file <tt class="docutils literal">fzn_all_different_int.mzn</tt>, with the following implementation:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="k">predicate</span><span class="s"> </span><span class="nf">fzn_all_different_int</span><span class="p">(</span><span class="kt">array</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="s"> </span><span class="kt">of</span><span class="s"> </span><span class="kt">var</span><span class="s"> </span><span class="kt">int</span><span class="p">:</span><span class="s"> </span><span class="nv">x</span><span class="p">)</span><span class="s"> </span><span class="o">=</span>
<span class="s">  </span><span class="k">forall</span><span class="p">(</span><span class="nv">i</span><span class="p">,</span><span class="nv">j</span><span class="s"> </span><span class="k">in</span><span class="s"> </span><span class="nb">index_set</span><span class="p">(</span><span class="nv">x</span><span class="p">)</span><span class="s"> </span><span class="k">where</span><span class="s"> </span><span class="nv">i</span><span class="s"> </span><span class="o">&lt;</span><span class="s"> </span><span class="nv">j</span><span class="p">)</span><span class="s"> </span><span class="p">(</span><span class="s"> </span><span class="nv">x</span><span class="p">[</span><span class="nv">i</span><span class="p">]</span><span class="s"> </span><span class="o">!=</span><span class="s"> </span><span class="nv">x</span><span class="p">[</span><span class="nv">j</span><span class="p">]</span><span class="s"> </span><span class="p">);</span>
</pre></div>
</div>
<p>A solver, let’s call it <em>OptiSolve</em>, that supports this constraint natively can place a file with the same name, <tt class="docutils literal">fzn_all_different_int.mzn</tt>, in its library, and redefine it as follows:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="k">predicate</span><span class="s"> </span><span class="nf">optisolve_alldifferent</span><span class="p">(</span><span class="kt">array</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="s"> </span><span class="kt">of</span><span class="s"> </span><span class="kt">var</span><span class="s"> </span><span class="kt">int</span><span class="p">:</span><span class="s"> </span><span class="nv">x</span><span class="p">);</span>

<span class="k">predicate</span><span class="s"> </span><span class="nf">fzn_all_different_int</span><span class="p">(</span><span class="kt">array</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="s"> </span><span class="kt">of</span><span class="s"> </span><span class="kt">var</span><span class="s"> </span><span class="kt">int</span><span class="p">:</span><span class="s"> </span><span class="nv">x</span><span class="p">)</span><span class="s"> </span><span class="o">=</span>
<span class="s">  </span><span class="nf">optisolve_alldifferent</span><span class="p">(</span><span class="nv">x</span><span class="p">);</span>
</pre></div>
</div>
<p>When a MiniZinc model that contains the <tt class="docutils literal">all_different</tt> constraint is now compiled with the <em>OptiSolve</em> library, the generated FlatZinc will contain calls to the newly defined predicate <tt class="docutils literal">optisolve_alldifferent</tt>.</p>
<p><strong>Note:</strong> The solver-specific library has been reorganised for MiniZinc version 2.3.0. Previously, a solver library would contain e.g. the file <tt class="docutils literal">bin_packing.mzn</tt> in order to override the <code class="code mzn minizinc docutils literal highlight highlight-minizinc"><span></span><span class="bp">bin_packing</span></code> constraint. With version 2.3.0, this is still possible (in order to maintain backwards compatibility). However, the predicate <code class="code mzn minizinc docutils literal highlight highlight-minizinc"><span></span><span class="bp">bin_packing</span></code> from file <tt class="docutils literal">bin_packing.mzn</tt> now delegates to the predicate <code class="code mzn minizinc docutils literal highlight highlight-minizinc"><span></span><span class="nv">fzn_bin_packing</span></code> in <tt class="docutils literal">fzn_bin_packing.mzn</tt>. This enables the <code class="code mzn minizinc docutils literal highlight highlight-minizinc"><span></span><span class="bp">bin_packing</span></code> predicate to check that the arguments are correct using assertions, before delegating to the solver-specific predicate. If your solver still uses the old library layout (i.e., overriding <tt class="docutils literal">bin_packing.mzn</tt> instead of <tt class="docutils literal">fzn_bin_packing.mzn</tt>), you should consider updating it to the new standard.</p>
</section>
<section id="reified-and-half-reified-predicates">
<span id="fzn-half-reif"></span><h3><span class="section-number">4.3.4.3. </span>Reified and half-reified predicates<a class="headerlink" href="#reified-and-half-reified-predicates" title="Link to this heading"></a></h3>
<p>A reified constraint is a constraint that is not simply enforced, but whose truth value is bound to a Boolean variable. For example, a MiniZinc expression <code class="code mzn minizinc docutils literal highlight highlight-minizinc"><span></span><span class="kt">var</span><span class="s"> </span><span class="kt">bool</span><span class="p">:</span><span class="s"> </span><span class="nv">b</span><span class="s"> </span><span class="o">=</span><span class="s"> </span><span class="bp">all_different</span><span class="p">(</span><span class="nv">x</span><span class="p">);</span></code> would constrain <code class="code mzn minizinc docutils literal highlight highlight-minizinc"><span></span><span class="nv">b</span></code> to be true if and only if the variables <code class="code mzn minizinc docutils literal highlight highlight-minizinc"><span></span><span class="nv">x</span></code> take pairwise different values.</p>
<p>If a predicate is called in such a reified context, the MiniZinc compiler will try to find a version of the predicate with <code class="code mzn minizinc docutils literal highlight highlight-minizinc"><span></span><span class="s">_reif</span></code> added to its identifier and an additional <code class="code mzn minizinc docutils literal highlight highlight-minizinc"><span></span><span class="kt">var</span><span class="s"> </span><span class="kt">bool</span></code> argument. For the above example, the compiler will try to generate the following FlatZinc code:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="kt">var</span><span class="s"> </span><span class="kt">bool</span><span class="p">:</span><span class="s"> </span><span class="nv">b</span><span class="p">;</span>
<span class="k">constraint</span><span class="s"> </span><span class="nf">all_different_reif</span><span class="p">(</span><span class="nv">x</span><span class="p">,</span><span class="s"> </span><span class="nv">b</span><span class="p">);</span>
</pre></div>
</div>
<p>If the <code class="code mzn minizinc docutils literal highlight highlight-minizinc"><span></span><span class="s">_reif</span></code> predicate does not exist, the compiler will try to use the definition of the original predicate. However, this may not be ideal: the original definition may make use of free variables in a <code class="code mzn minizinc docutils literal highlight highlight-minizinc"><span></span><span class="k">let</span></code> expression (which is not allowed in reified contexts), or it may lead to inefficient solving.</p>
<p>Solver libraries should therefore provide reified versions of constraints whenever possible. The library contains files <tt class="docutils literal">fzn_<constraintname>_reif.mzn</tt> for this purpose.</p>
<p>When a reified constraint is used in a <em>positive context</em> (see <tt class="xref std std-numref docutils literal">pred-context</tt>), the MiniZinc compiler can use a special version, called a half-reified predicate and identified by an <code class="code mzn minizinc docutils literal highlight highlight-minizinc"><span></span><span class="s">_imp</span></code> suffix, instead of the <code class="code mzn minizinc docutils literal highlight highlight-minizinc"><span></span><span class="s">_reif</span></code> predicate. Half-reified predicates essentially represent constraints that are <em>implied</em> by a Boolean variable rather than being equivalent to one. This typically leads to simpler translations or more efficient propagation (e.g., a half-reified <code class="code mzn minizinc docutils literal highlight highlight-minizinc"><span></span><span class="bp">all_different</span></code> only needs to <em>check</em> whether it is false, but it never has to implement the negation of the actual constraint).</p>
<p>For example, <code class="code mzn minizinc docutils literal highlight highlight-minizinc"><span></span><span class="k">constraint</span><span class="s"> </span><span class="nv">y</span><span class="o">=</span><span class="m">0</span><span class="s"> </span><span class="o">\/</span><span class="s"> </span><span class="bp">all_different</span><span class="p">(</span><span class="nv">x</span><span class="p">)</span></code> might be translated as follows:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="kt">var</span><span class="s"> </span><span class="kt">bool</span><span class="p">:</span><span class="s"> </span><span class="nv">X_INTRODUCED_1</span><span class="p">;</span>
<span class="kt">var</span><span class="s"> </span><span class="kt">bool</span><span class="p">:</span><span class="s"> </span><span class="nv">X_INTRODUCED_2</span><span class="p">;</span>
<span class="k">constraint</span><span class="s"> </span><span class="nf">int_eq_imp</span><span class="p">(</span><span class="nv">y</span><span class="p">,</span><span class="m">0</span><span class="p">,</span><span class="nv">X_INTRODUCED_1</span><span class="p">);</span>
<span class="k">constraint</span><span class="s"> </span><span class="nf">all_different_imp</span><span class="p">(</span><span class="nv">x</span><span class="p">,</span><span class="s"> </span><span class="nv">X_INTRODUCED_2</span><span class="p">);</span>
<span class="k">constraint</span><span class="s"> </span><span class="nf">bool_clause</span><span class="p">([</span><span class="nv">X_INTRODUCED_1</span><span class="p">,</span><span class="nv">X_INTRODUCED_2</span><span class="p">]);</span>
</pre></div>
</div>
<p>MiniZinc will decide whether to use half-reification case by case based on the availability of the <code class="code mzn minizinc docutils literal highlight highlight-minizinc"><span></span><span class="s">_imp</span></code> predicate. As for reified constraints, it may be benefitial to provide specialised half-reified versions if the solver supports them.</p>
</section>
</section>
<section id="command-line-interface-and-standard-options">
<span id="fzn-cmdline-options"></span><h2><span class="section-number">4.3.5. </span>Command-Line Interface and Standard Options<a class="headerlink" href="#command-line-interface-and-standard-options" title="Link to this heading"></a></h2>
<p>In order to work with the <tt class="docutils literal">minizinc</tt> command line driver, a FlatZinc solver must be an executable (which can include e.g. shell scripts) that can be invoked as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>&lt;executable-name&gt;<span class="w"> </span><span class="o">[</span>options<span class="o">]</span><span class="w"> </span>model.fzn
</pre></div>
</div>
<p>where <tt class="docutils literal"><executable-name></tt> is the name of the executable. Solvers may support the following standard options:</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-a">
<span class="sig-name descname"><span class="pre">-a</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-a" title="Link to this definition"></a></dt>
<dd><p>Instructs the solver to report <em>all</em> solutions in the case of satisfaction
problems, or print <em>intermediate</em> solutions of increasing quality in the case
of optimisation problems.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-n">
<span class="sig-name descname"><span class="pre">-n</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;i&gt;</span></span><a class="headerlink" href="#cmdoption-n" title="Link to this definition"></a></dt>
<dd><p>Instructs the solver to stop after reporting <tt class="docutils literal">i</tt> solutions (only used with
satisfaction problems).</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-i">
<span class="sig-name descname"><span class="pre">-i</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-i" title="Link to this definition"></a></dt>
<dd><p>Instructs the solver to print <em>intermediate</em> solutions of increasing quality
(only used with optimisation problems). This option should be supported rather
than <tt class="docutils literal">-a</tt> for solvers which only support printing of intermediate solutions
for optimisation problems but no reporting of all solutions for satisfaction
problems.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-f">
<span class="sig-name descname"><span class="pre">-f</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-f" title="Link to this definition"></a></dt>
<dd><p>Instructs the solver to conduct a “free search”, i.e., ignore any search
annotations. The solver is not <em>required</em> to ignore the annotations, but it
is <em>allowed</em> to do so.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-s">
<span class="sig-name descname"><span class="pre">-s</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-s" title="Link to this definition"></a></dt>
<dd><p>Print statistics during and/or after the search for solutions. Statistics
should be printed as FlatZinc comments to the standard output stream.
See <a class="reference internal" href="#ch-fzn-statistics"><span class="std std-numref">节 4.3.3.2</span></a> for the standard format for statistics.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-v">
<span class="sig-name descname"><span class="pre">-v</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-v" title="Link to this definition"></a></dt>
<dd><p>Print log messages (verbose solving) to the standard error stream. If solvers
choose to print to standard output instead, all messages must be valid
comments (i.e., start with a <tt class="docutils literal">%</tt> character).</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-p">
<span class="sig-name descname"><span class="pre">-p</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;i&gt;</span></span><a class="headerlink" href="#cmdoption-p" title="Link to this definition"></a></dt>
<dd><p>Run with <tt class="docutils literal">i</tt> parallel threads (for multi-threaded solvers).</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-r">
<span class="sig-name descname"><span class="pre">-r</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;i&gt;</span></span><a class="headerlink" href="#cmdoption-r" title="Link to this definition"></a></dt>
<dd><p>Use <tt class="docutils literal">i</tt> as the random seed (for any random number generators the solver
may be using).</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-t">
<span class="sig-name descname"><span class="pre">-t</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;ms&gt;</span></span><a class="headerlink" href="#cmdoption-t" title="Link to this definition"></a></dt>
<dd><p>Wall time limit <tt class="docutils literal">ms</tt> milliseconds.</p>
</dd></dl>

</section>
<section id="solver-configuration-files">
<span id="sec-cmdline-conffiles"></span><h2><span class="section-number">4.3.6. </span>Solver Configuration Files<a class="headerlink" href="#solver-configuration-files" title="Link to this heading"></a></h2>
<p>In order for a solver to be available to MiniZinc, it has to be described in a <em>solver configuration file</em>. This is a simple file, in JSON or <tt class="docutils literal">.dzn</tt> format, that contains some basic information such as the solver’s name, version, where its library of global constraints can be found, and a path to its executable.
Examples are given in <a class="reference internal" href="solvers.html#ch-solvers"><span class="std std-numref">节 3.5</span></a>.</p>
<p>A solver configuration file must have file extension <tt class="docutils literal">.msc</tt> (for MiniZinc Solver Configuration), and can be placed in any of the following locations:</p>
<ul class="simple">
<li><p>In the <tt class="docutils literal">minizinc/solvers/</tt> directory of the MiniZinc installation. If you install MiniZinc from the binary distribution, this directory can be found at <tt class="docutils literal">/usr/share/minizinc/solvers</tt> on Linux systems, inside the MiniZincIDE application on macOS system, and in the <tt class="docutils literal">Program Files\MiniZinc IDE (bundled)</tt> folder on Windows.</p></li>
<li><p>In the directory <tt class="docutils literal">$HOME/.minizinc/solvers</tt> on Linux and macOS systems, and the Application Data directory on Windows systems.</p></li>
<li><p>In any directory listed on the <tt class="docutils literal">MZN_SOLVER_PATH</tt> environment variable (directories are separated by <tt class="docutils literal">:</tt> on Linux and macOS, and by <tt class="docutils literal">;</tt> on Windows systems).</p></li>
<li><p>In any directory listed in the <tt class="docutils literal">mzn_solver_path</tt> option of the global or user-specific configuration file (see <a class="reference internal" href="command_line.html#ch-user-config"><span class="std std-numref">节 3.1.4</span></a>)</p></li>
<li><p>Alternatively, you can use the MiniZinc IDE to create solver configuration files, see <a class="reference internal" href="minizinc_ide.html#sec-ide-add-solvers"><span class="std std-numref">节 3.2.5.2</span></a> for details.</p></li>
</ul>
<p>You can also query the <tt class="docutils literal">minizinc</tt> driver about these directories using the <tt class="docutils literal">--config-dirs</tt> command line option.</p>
<p>Solver configuration files must be valid JSON or <tt class="docutils literal">.dzn</tt> files. As a JSON file, it must be an object with certain fields. As a <tt class="docutils literal">.dzn</tt> file, it must consist of assignment items.</p>
<p>For example, a simple solver configuration in JSON format could look like this:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;My Solver&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;org.myorg.my_solver&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;executable&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;fzn-mysolver&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The same configuration in <tt class="docutils literal">.dzn</tt> format would look like this:</p>
<div class="highlight-minizinc notranslate"><div class="highlight"><pre><span></span><span class="nv">name</span><span class="s"> </span><span class="o">=</span><span class="s"> &quot;My Solver&quot;</span><span class="p">;</span>
<span class="nv">version</span><span class="s"> </span><span class="o">=</span><span class="s"> &quot;1.0&quot;</span><span class="p">;</span>
<span class="nv">id</span><span class="s"> </span><span class="o">=</span><span class="s"> &quot;org.myorg.my_solver&quot;</span><span class="p">;</span>
<span class="nv">executable</span><span class="s"> </span><span class="o">=</span><span class="s"> &quot;fzn-mysolver&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>Here is a list of all configuration options recognised by the configuration file parser. Any valid configuration file must at least contain the fields <tt class="docutils literal">name</tt>, <tt class="docutils literal">version</tt>, <tt class="docutils literal">id</tt>, and <tt class="docutils literal">executable</tt>.</p>
<ul class="simple">
<li><p><tt class="docutils literal">name</tt> (string, required): The name of the solver (displayed, together with the version, when you call <tt class="docutils literal">minizinc --solvers</tt>, and in the MiniZinc IDE).</p></li>
<li><p><tt class="docutils literal">version</tt> (string, required): The version of the solver.</p></li>
<li><p><tt class="docutils literal">id</tt> (string, required): A unique identifier for the solver, “reverse domain name” notation.</p></li>
<li><p><tt class="docutils literal">executable</tt> (string or list of strings, required): The executable for this solver that can run FlatZinc files. This can be just a file name (in which case the solver has to be on the current PATH), an absolute path to the executable, or a relative path (which is interpreted relative to the location of the configuration file). When a list of strings is provided, the first string is treated as the executable and consecutive strings are treated as arguments or flags that are always passed to the executable (i.e., arguments and flags that are not configurable by the solver user).</p></li>
<li><p><tt class="docutils literal">mznlib</tt> (string, default <tt class="docutils literal">""</tt>): The solver-specific library of global constraints and redefinitions. This should be the name of a directory (either an absolute path or a relative path, interpreted relative to the location of the configuration file). For solvers whose libraries are installed in the same location as the MiniZinc standard library, this can also take the form <tt class="docutils literal">-G<solverlib></tt>, e.g., <tt class="docutils literal">-Ggecode</tt> (this is mostly the case for solvers that ship with the MiniZinc binary distribution).</p></li>
<li><p><tt class="docutils literal">tags</tt> (list of strings, default empty): Each solver can have one or more tags that describe its features in an abstract way. Tags can be used for selecting a solver using the <tt class="docutils literal">--solver</tt> option. There is no fixed list of tags, however we recommend using the following tags if they match the solver’s behaviour:</p>
<ul>
<li><p><tt class="docutils literal">"cp"</tt>: for Constraint Programming solvers</p></li>
<li><p><tt class="docutils literal">"mip"</tt>: for Mixed Integer Programming solvers</p></li>
<li><p><tt class="docutils literal">"float"</tt>: for solvers that support float variables</p></li>
<li><p><tt class="docutils literal">"api"</tt>: for solvers that use the internal C++ API</p></li>
</ul>
</li>
<li><p><tt class="docutils literal">stdFlags</tt> (list of strings, default empty): Which of the standard solver command line flags are supported by this solver. The standard flags are <tt class="docutils literal">-a</tt>, <tt class="docutils literal">-n</tt>, <tt class="docutils literal">-i</tt>, <tt class="docutils literal">-s</tt>, <tt class="docutils literal">-v</tt>, <tt class="docutils literal">-p</tt>, <tt class="docutils literal">-r</tt>, <tt class="docutils literal">-f</tt>, <tt class="docutils literal">-t</tt>.</p></li>
<li><p><tt class="docutils literal">extraFlags</tt> (list of list of strings, default empty): Extra command line flags supported by the solver. Each entry must be a list of four strings. The first string is the name of the option (e.g. <tt class="docutils literal">"--special-algorithm"</tt>). The second string is a description that can be used to generate help output (e.g. <tt class="docutils literal">"which special algorithm to use"</tt>). The third string specifies the type of the argument (<tt class="docutils literal">"int"</tt>, <tt class="docutils literal">"bool"</tt>, <tt class="docutils literal">"float"</tt>, <tt class="docutils literal">"string"</tt> or <tt class="docutils literal">"opt"</tt>). The fourth string is the default value. The following types have an additional extended syntax:</p>
<ul>
<li><p><tt class="docutils literal">"int:n:m"</tt> where <tt class="docutils literal">n</tt> and <tt class="docutils literal">m</tt> are integers, gives lower and upper bounds for the supported values</p></li>
<li><p><tt class="docutils literal">"float:n:m"</tt> where <tt class="docutils literal">n</tt> and <tt class="docutils literal">m</tt> are floating point numbers, gives lower and upper bounds for the supported values</p></li>
<li><p><tt class="docutils literal">"bool:onstring:offstring"</tt> specifies strings to add to the command line flag to turn it on (<tt class="docutils literal">onstring</tt>) and off (<tt class="docutils literal">offstring</tt>). E.g., <tt class="docutils literal">["-interrupt","whether to catch Ctrl-C","bool:false:true","true"]</tt> specifies a command line option that can be called as <tt class="docutils literal">-interrupt true</tt> or <tt class="docutils literal">-interrupt false</tt>. The standard behaviour (just <tt class="docutils literal">"bool"</tt>) means that the option is either added to the command line or not.</p></li>
<li><p><tt class="docutils literal">"opt:first option:second option:...:last option"</tt> specifies a list of possible values for the option</p></li>
</ul>
</li>
<li><p><tt class="docutils literal">inputType</tt> (string, default <tt class="docutils literal">FZN</tt>, options <tt class="docutils literal">MZN</tt>, <tt class="docutils literal">FZN</tt>, <tt class="docutils literal">NL</tt>, <tt class="docutils literal">JSON</tt>): The type of input expected by the solver.</p></li>
<li><p><tt class="docutils literal">supportsMzn</tt> (bool, default <tt class="docutils literal">false</tt>): Whether the solver can run MiniZinc directly (i.e., it implements its own compilation or interpretation of the model). [Deprecated, use <tt class="docutils literal">inputType</tt>]</p></li>
<li><p><tt class="docutils literal">supportsFzn</tt> (bool, default <tt class="docutils literal">true</tt>): Whether the solver can run FlatZinc. This should be the case for most solvers.  [Deprecated, use <tt class="docutils literal">inputType</tt>]</p></li>
<li><p><tt class="docutils literal">supportsNL</tt> (bool, default <tt class="docutils literal">false</tt>): Whether the solver supports NL input. Used for non-linear solvers.  [Deprecated, use <tt class="docutils literal">inputType</tt>]</p></li>
<li><p><tt class="docutils literal">needsSolns2Out</tt> (bool, default <tt class="docutils literal">true</tt>): Whether the output of the solver needs to be passed through the MiniZinc output processor.</p></li>
<li><p><tt class="docutils literal">needsMznExecutable</tt> (bool, default <tt class="docutils literal">false</tt>): Whether the solver needs to know the location of the MiniZinc executable. If true, it will be passed to the solver using the <tt class="docutils literal">mzn-executable</tt> option.</p></li>
<li><p><tt class="docutils literal">needsStdlibDir</tt> (bool, default <tt class="docutils literal">false</tt>): Whether the solver needs to know the location of the MiniZinc standard library directory. If true, it will be passed to the solver using the <tt class="docutils literal">stdlib-dir</tt> option.</p></li>
<li><p><tt class="docutils literal">isGUIApplication</tt> (bool, default <tt class="docutils literal">false</tt>): Whether the solver has its own graphical user interface, which means that MiniZinc will detach from the process and not wait for it to finish or to produce any output.</p></li>
</ul>
</section>
<section id="grammar">
<span id="ch-fzn-syntax"></span><h2><span class="section-number">4.3.7. </span>Grammar<a class="headerlink" href="#grammar" title="Link to this heading"></a></h2>
<p>This is the full grammar for FlatZinc. It is a proper subset of the MiniZinc grammar (see <a class="reference internal" href="spec.html#spec-grammar"><span class="std std-numref">节 4.1.14</span></a>). However, instead of specifying all the cases in the MiniZinc grammar that do <em>not</em> apply to FlatZinc, the BNF syntax below contains only the relevant syntactic constructs. It uses the same notation as in <a class="reference internal" href="spec.html#spec-syntax-notation"><span class="std std-numref">节 4.1.2</span></a>.</p>
<div class="highlight-minizincdef notranslate"><div class="highlight"><pre><span></span><span class="c">% A FlatZinc model</span>
<span class="cs">&lt;model&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> </span>
<span class="s">  </span><span class="p">[</span><span class="s"> </span><span class="cs">&lt;predicate-item&gt;</span><span class="s"> </span><span class="p">]</span><span class="o">*</span>
<span class="s">  </span><span class="p">[</span><span class="s"> </span><span class="cs">&lt;par-decl-item&gt;</span><span class="s"> </span><span class="p">]</span><span class="o">*</span>
<span class="s">  </span><span class="p">[</span><span class="s"> </span><span class="cs">&lt;var-decl-item&gt;</span><span class="s"> </span><span class="p">]</span><span class="o">*</span>
<span class="s">  </span><span class="p">[</span><span class="s"> </span><span class="cs">&lt;constraint-item&gt;</span><span class="s"> </span><span class="p">]</span><span class="o">*</span>
<span class="s">  </span><span class="cs">&lt;solve-item&gt;</span>

<span class="c">% Predicate items</span>
<span class="cs">&lt;predicate-item&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> &quot;predicate&quot; </span><span class="cs">&lt;identifier&gt;</span><span class="s"> &quot;(&quot; </span><span class="p">[</span><span class="s"> </span><span class="cs">&lt;pred-param-type&gt;</span><span class="s"> </span><span class="p">:</span><span class="s"> </span><span class="cs">&lt;identifier&gt;</span><span class="s"> &quot;,&quot; ... </span><span class="p">]</span><span class="s"> &quot;)&quot; &quot;;&quot;</span>

<span class="c">% Identifiers</span>
<span class="cs">&lt;identifier&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> </span><span class="sr">[A-Za-z][A-Za-z0-9_]</span><span class="o">*</span>

<span class="cs">&lt;basic-par-type&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> &quot;bool&quot;</span>
<span class="cs">                   |</span><span class="s"> &quot;int&quot;</span>
<span class="cs">                   |</span><span class="s"> &quot;float&quot;</span>
<span class="cs">                   |</span><span class="s"> &quot;set of int&quot;</span>

<span class="cs">&lt;par-type&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> </span><span class="cs">&lt;basic-par-type&gt;</span>
<span class="cs">             |</span><span class="s"> &quot;array&quot; &quot;[&quot; </span><span class="cs">&lt;index-set&gt;</span><span class="s"> &quot;]&quot; &quot;of&quot; </span><span class="cs">&lt;basic-par-type&gt;</span>

<span class="cs">&lt;basic-var-type&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> &quot;var&quot; </span><span class="cs">&lt;basic-par-type&gt;</span>
<span class="cs">                   |</span><span class="s"> &quot;var&quot; </span><span class="cs">&lt;int-literal&gt;</span><span class="s"> &quot;..&quot; </span><span class="cs">&lt;int-literal&gt;</span>
<span class="cs">                   |</span><span class="s"> &quot;var&quot; &quot;{&quot; </span><span class="cs">&lt;int-literal&gt;</span><span class="s"> &quot;,&quot; ... &quot;}&quot;</span>
<span class="cs">                   |</span><span class="s"> &quot;var&quot; </span><span class="cs">&lt;float-literal&gt;</span><span class="s"> &quot;..&quot; </span><span class="cs">&lt;float-literal&gt;</span>
<span class="cs">                   |</span><span class="s"> &quot;var&quot; &quot;set&quot; &quot;of&quot; </span><span class="cs">&lt;int-literal&gt;</span><span class="s"> &quot;..&quot; </span><span class="cs">&lt;int-literal&gt;</span>
<span class="cs">                   |</span><span class="s"> &quot;var&quot; &quot;set&quot; &quot;of&quot; &quot;{&quot; </span><span class="p">[</span><span class="s"> </span><span class="cs">&lt;int-literal&gt;</span><span class="s"> &quot;,&quot; ... </span><span class="p">]</span><span class="s"> &quot;}&quot;</span>

<span class="cs">&lt;array-var-type&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> &quot;array&quot; &quot;[&quot; </span><span class="cs">&lt;index-set&gt;</span><span class="s"> &quot;]&quot; &quot;of&quot; </span><span class="cs">&lt;basic-var-type&gt;</span>

<span class="cs">&lt;index-set&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> &quot;1&quot; &quot;..&quot; </span><span class="cs">&lt;int-literal&gt;</span>

<span class="cs">&lt;basic-pred-param-type&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> </span><span class="cs">&lt;basic-par-type&gt;</span>
<span class="cs">                          |</span><span class="s"> </span><span class="cs">&lt;basic-var-type&gt;</span>
<span class="cs">                          |</span><span class="s"> </span><span class="cs">&lt;int-literal&gt;</span><span class="s"> &quot;..&quot; </span><span class="cs">&lt;int-literal&gt;</span>
<span class="cs">                          |</span><span class="s"> </span><span class="cs">&lt;float-literal&gt;</span><span class="s"> &quot;..&quot; </span><span class="cs">&lt;float-literal&gt;</span>
<span class="cs">                          |</span><span class="s"> &quot;{&quot; </span><span class="cs">&lt;int-literal&gt;</span><span class="s"> &quot;,&quot; ... &quot;}&quot;</span>
<span class="cs">                          |</span><span class="s"> &quot;set&quot; &quot;of&quot; </span><span class="cs">&lt;int-literal&gt;</span><span class="s"> .. </span><span class="cs">&lt;int-literal&gt;</span>
<span class="cs">                          |</span><span class="s"> &quot;set&quot; &quot;of&quot; &quot;{&quot; </span><span class="p">[</span><span class="s">  </span><span class="cs">&lt;int-literal&gt;</span><span class="s"> &quot;,&quot; ... </span><span class="p">]</span><span class="s"> &quot;}&quot;</span>

<span class="cs">&lt;pred-param-type&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> </span><span class="cs">&lt;basic-pred-param-type&gt;</span>
<span class="cs">                    |</span><span class="s"> &quot;array&quot; &quot;[&quot; </span><span class="cs">&lt;pred-index-set&gt;</span><span class="s"> &quot;]&quot; &quot;of&quot; </span><span class="cs">&lt;basic-pred-param-type&gt;</span>

<span class="cs">&lt;pred-index-set&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> </span><span class="cs">&lt;index-set&gt;</span>
<span class="cs">                   |</span><span class="s"> &quot;int&quot;</span>

<span class="cs">&lt;basic-literal-expr&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> </span><span class="cs">&lt;bool-literal&gt;</span>
<span class="cs">                       |</span><span class="s"> </span><span class="cs">&lt;int-literal&gt;</span>
<span class="cs">                       |</span><span class="s"> </span><span class="cs">&lt;float-literal&gt;</span>
<span class="cs">                       |</span><span class="s"> </span><span class="cs">&lt;set-literal&gt;</span>

<span class="cs">&lt;basic-expr&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> </span><span class="cs">&lt;basic-literal-expr&gt;</span>
<span class="cs">              |</span><span class="s"> </span><span class="cs">&lt;var-par-identifier&gt;</span>

<span class="cs">&lt;expr&gt;</span><span class="s">       </span><span class="cs">::=</span><span class="s"> </span><span class="cs">&lt;basic-expr&gt;</span>
<span class="cs">               |</span><span class="s"> </span><span class="cs">&lt;array-literal&gt;</span>

<span class="cs">&lt;par-expr&gt;</span><span class="s">   </span><span class="cs">::=</span><span class="s"> </span><span class="cs">&lt;basic-literal-expr&gt;</span>
<span class="cs">               |</span><span class="s"> </span><span class="cs">&lt;par-array-literal&gt;</span>

<span class="cs">&lt;var-par-identifier&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> </span><span class="sr">[A-Za-z_][A-Za-z0-9_]</span><span class="o">*</span>

<span class="c">% Boolean literals</span>
<span class="cs">&lt;bool-literal&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> &quot;false&quot;</span>
<span class="cs">                 |</span><span class="s"> &quot;true&quot;</span>

<span class="c">% Integer literals</span>
<span class="cs">&lt;int-literal&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> </span><span class="sr">[-]</span><span class="s">?</span><span class="sr">[0-9]</span><span class="o">+</span>
<span class="cs">                |</span><span class="s"> </span><span class="sr">[-]</span><span class="s">?</span><span class="m">0</span><span class="s">x</span><span class="sr">[0-9A-Fa-f]</span><span class="o">+</span>
<span class="cs">                |</span><span class="s"> </span><span class="sr">[-]</span><span class="s">?</span><span class="m">0</span><span class="s">o</span><span class="sr">[0-7]</span><span class="o">+</span>

<span class="c">% Float literals</span>
<span class="cs">&lt;float-literal&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> </span><span class="sr">[-]</span><span class="s">?</span><span class="sr">[0-9]</span><span class="o">+</span><span class="s">.</span><span class="sr">[0-9]</span><span class="o">+</span>
<span class="cs">                  |</span><span class="s"> </span><span class="sr">[-]</span><span class="s">?</span><span class="sr">[0-9]</span><span class="o">+</span><span class="s">.</span><span class="sr">[0-9]</span><span class="o">+</span><span class="sr">[Ee][-+]</span><span class="s">?</span><span class="sr">[0-9]</span><span class="o">+</span>
<span class="cs">                  |</span><span class="s"> </span><span class="sr">[-]</span><span class="s">?</span><span class="sr">[0-9]</span><span class="o">+</span><span class="sr">[Ee][-+]</span><span class="s">?</span><span class="sr">[0-9]</span><span class="o">+</span>

<span class="c">% Set literals</span>
<span class="cs">&lt;set-literal&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> &quot;{&quot; </span><span class="p">[</span><span class="s"> </span><span class="cs">&lt;int-literal&gt;</span><span class="s"> &quot;,&quot; ... </span><span class="p">]</span><span class="s"> &quot;}&quot;</span>
<span class="cs">                |</span><span class="s"> </span><span class="cs">&lt;int-literal&gt;</span><span class="s"> &quot;..&quot; </span><span class="cs">&lt;int-literal&gt;</span>
<span class="cs">                |</span><span class="s"> &quot;{&quot; </span><span class="p">[</span><span class="s"> </span><span class="cs">&lt;float-literal&gt;</span><span class="s"> &quot;,&quot; ... </span><span class="p">]</span><span class="s"> &quot;}&quot;</span>
<span class="cs">                |</span><span class="s"> </span><span class="cs">&lt;float-literal&gt;</span><span class="s"> &quot;..&quot; </span><span class="cs">&lt;float-literal&gt;</span>

<span class="cs">&lt;array-literal&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> &quot;[&quot; </span><span class="p">[</span><span class="s"> </span><span class="cs">&lt;basic-expr&gt;</span><span class="s"> &quot;,&quot; ... </span><span class="p">]</span><span class="s"> &quot;]&quot;</span>

<span class="cs">&lt;par-array-literal&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> &quot;[&quot; </span><span class="p">[</span><span class="s"> </span><span class="cs">&lt;basic-literal-expr&gt;</span><span class="s"> &quot;,&quot; ... </span><span class="p">]</span><span class="s"> &quot;]&quot;</span>

<span class="c">% Parameter declarations</span>

<span class="cs">&lt;par-decl-item&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> </span><span class="cs">&lt;par-type&gt;</span><span class="s"> &quot;:&quot; </span><span class="cs">&lt;var-par-identifier&gt;</span><span class="s"> &quot;=&quot; </span><span class="cs">&lt;par-expr&gt;</span><span class="s"> &quot;;&quot;</span>

<span class="c">% Variable declarations</span>

<span class="cs">&lt;var-decl-item&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> </span><span class="cs">&lt;basic-var-type&gt;</span><span class="s"> &quot;:&quot; </span><span class="cs">&lt;var-par-identifier&gt;</span><span class="s"> </span><span class="cs">&lt;annotations&gt;</span><span class="s"> </span><span class="p">[</span><span class="s"> &quot;=&quot; </span><span class="cs">&lt;basic-expr&gt;</span><span class="s"> </span><span class="p">]</span><span class="s"> &quot;;&quot;</span>
<span class="cs">                  |</span><span class="s"> </span><span class="cs">&lt;array-var-type&gt;</span><span class="s"> &quot;:&quot; </span><span class="cs">&lt;var-par-identifier&gt;</span><span class="s"> </span><span class="cs">&lt;annotations&gt;</span><span class="s"> &quot;=&quot; </span><span class="cs">&lt;array-literal&gt;</span><span class="s"> &quot;;&quot;</span>
<span class="s">                  </span>

<span class="c">% Constraint items</span>

<span class="cs">&lt;constraint-item&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> &quot;constraint&quot; </span><span class="cs">&lt;identifier&gt;</span><span class="s"> &quot;(&quot; </span><span class="p">[</span><span class="s"> </span><span class="cs">&lt;expr&gt;</span><span class="s"> &quot;,&quot; ... </span><span class="p">]</span><span class="s"> &quot;)&quot; </span><span class="cs">&lt;annotations&gt;</span><span class="s"> &quot;;&quot;</span>

<span class="c">% Solve item</span>

<span class="cs">&lt;solve-item&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> &quot;solve&quot; </span><span class="cs">&lt;annotations&gt;</span><span class="s"> &quot;satisfy&quot; &quot;;&quot;</span>
<span class="cs">               |</span><span class="s"> &quot;solve&quot; </span><span class="cs">&lt;annotations&gt;</span><span class="s"> &quot;minimize&quot; </span><span class="cs">&lt;basic-expr&gt;</span><span class="s"> &quot;;&quot;</span>
<span class="cs">               |</span><span class="s"> &quot;solve&quot; </span><span class="cs">&lt;annotations&gt;</span><span class="s"> &quot;maximize&quot; </span><span class="cs">&lt;basic-expr&gt;</span><span class="s"> &quot;;&quot;</span>

<span class="c">% Annotations</span>

<span class="cs">&lt;annotations&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> </span><span class="p">[</span><span class="s"> &quot;::&quot; </span><span class="cs">&lt;annotation&gt;</span><span class="s"> </span><span class="p">]</span><span class="o">*</span>

<span class="cs">&lt;annotation&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> </span><span class="cs">&lt;identifier&gt;</span>
<span class="cs">               |</span><span class="s"> </span><span class="cs">&lt;identifier&gt;</span><span class="s"> &quot;(&quot; </span><span class="cs">&lt;ann-expr&gt;</span><span class="s"> &quot;,&quot; ... &quot;)&quot;</span>

<span class="cs">&lt;ann-expr&gt;</span><span class="s">   </span><span class="p">:</span><span class="o">=</span><span class="s"> </span><span class="cs">&lt;basic-ann-expr&gt;</span>
<span class="cs">              |</span><span class="s"> &quot;[&quot; </span><span class="p">[</span><span class="s"> </span><span class="cs">&lt;basic-ann-expr&gt;</span><span class="s"> &quot;,&quot; ... </span><span class="p">]</span><span class="s"> &quot;]&quot;</span>

<span class="cs">&lt;basic-ann-expr&gt;</span><span class="s">   </span><span class="p">:</span><span class="o">=</span><span class="s"> </span><span class="cs">&lt;basic-literal-expr&gt;</span>
<span class="cs">                    |</span><span class="s"> </span><span class="cs">&lt;var-par-identifier&gt;</span>
<span class="cs">                    |</span><span class="s"> </span><span class="cs">&lt;string-literal&gt;</span>
<span class="cs">                    |</span><span class="s"> </span><span class="cs">&lt;annotation&gt;</span>

<span class="cs">&lt;string-contents&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> </span><span class="p">(</span><span class="sr">[^&quot;\n\]</span><span class="s"> </span><span class="gr">|</span><span class="s"> \</span><span class="sr">[^\n(]</span><span class="p">)</span><span class="o">*</span>

<span class="cs">&lt;string-literal&gt;</span><span class="s"> </span><span class="cs">::=</span><span class="s"> &quot;&quot;&quot; </span><span class="cs">&lt;string-contents&gt;</span><span class="s"> &quot;&quot;&quot;</span>

<span class="c">% End of FlatZinc grammar</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="页脚">
        <a href="lib-experimental-on_restart.html" class="btn btn-neutral float-left" title="4.2.7.1. On Restart" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="json-stream.html" class="btn btn-neutral float-right" title="4.4. Machine-readable JSON output format" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2016, 2017, 2018, 2019, 2020 Peter J. Stuckey, Kim Marriott, Guido Tack。</p>
  </div>

  
<a rel="license" href="http://creativecommons.org/licenses/by-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nd/4.0/80x15.png" /></a>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-63390311-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-63390311-1', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>
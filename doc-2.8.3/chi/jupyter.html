<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3.10. Using MiniZinc in Jupyter Notebooks &mdash; The MiniZinc Handbook 2.8.3</title>
      <link rel="stylesheet" type="text/css" href="static/pygments.css?v=77553476" />
      <link rel="stylesheet" type="text/css" href="static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="static/style.css?v=572cde19" />

  
    <link rel="canonical" href="http://www.minizinc.org/doc-latest/en/jupyter.html"/>
  <!--[if lt IE 9]>
    <script src="static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="static/jquery.js?v=5d32c60e"></script>
        <script src="static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="static/documentation_options.js?v=5fd05df9"></script>
        <script src="static/doctools.js?v=888ff710"></script>
        <script src="static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="static/js/doc-links.js?v=34cd1aa9"></script>
    <script src="static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3.11. Python Interface" href="python.html" />
    <link rel="prev" title="3.9. Mzn-Analyse" href="mzn-analyse.html" />
    <link rel="apple-touch-icon" sizes="57x57" href="static/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="static/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="static/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="static/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="static/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="static/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="static/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="static/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="static/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="static/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="static/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="static/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="static/favicon/favicon-16x16.png">
    <link rel="manifest" href="static/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="static/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  <a href="https://www.minizinc.org">
    
      <img src="static/MiniZn_logo_2.svg" class="logo" alt="Logo"/>
  </a>
      <div class="version">
        2.8.3
      </div>

  
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  
    
  
  <a href="index.html" class="reference internal icon icon-home"> The MiniZinc Handbook </a>
  
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="part_1_overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="part_2_tutorial.html">2. Minizinc 指南</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="part_3_user_manual.html">3. User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="command_line.html">3.1. The MiniZinc Command Line Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="minizinc_ide.html">3.2. The MiniZinc IDE</a></li>
<li class="toctree-l2"><a class="reference internal" href="visualisation.html">3.3. Visualising solutions in the MiniZinc IDE</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpprofiler.html">3.4. CP-Profiler</a></li>
<li class="toctree-l2"><a class="reference internal" href="solvers.html">3.5. Solving Technologies and Solver Backends</a></li>
<li class="toctree-l2"><a class="reference internal" href="checkers.html">3.6. Automatic Solution Checking, Model Validation, and Benchmarking</a></li>
<li class="toctree-l2"><a class="reference internal" href="globalizer.html">3.7. Globalizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="find_mus.html">3.8. FindMUS</a></li>
<li class="toctree-l2"><a class="reference internal" href="mzn-analyse.html">3.9. Mzn-Analyse</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.10. Using MiniZinc in Jupyter Notebooks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation">3.10.1. Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basic-usage">3.10.2. Basic usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="python.html">3.11. Python Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="javascript.html">3.12. JavaScript Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation_detailed.html">3.13. Installation from Source Code</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="part_4_reference.html">4. Reference Manual</a></li>
</ul>

  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">The MiniZinc Handbook</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="part_3_user_manual.html"><span class="section-number">3. </span>User Manual</a></li>
      <li class="breadcrumb-item active"><span class="section-number">3.10. </span>Using MiniZinc in Jupyter Notebooks</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="using-minizinc-in-jupyter-notebooks">
<h1><span class="section-number">3.10. </span>Using MiniZinc in Jupyter Notebooks<a class="headerlink" href="#using-minizinc-in-jupyter-notebooks" title="Link to this heading"></a></h1>
<p>You can use MiniZinc inside a Jupyter / IPython notebook using the <tt class="docutils literal">iminizinc</tt> Python module. The module provides a “cell magic” extension that lets you solve MiniZinc models.</p>
<p>The module requires an existing installation of MiniZinc.</p>
<section id="installation">
<h2><span class="section-number">3.10.1. </span>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<p>You can install or upgrade this module via <tt class="docutils literal">pip</tt>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-U<span class="w"> </span>iminizinc
</pre></div>
</div>
<p>Consult your Python documentation to find out if you need any extra options (e.g. you may want to use the <tt class="docutils literal">--user</tt> flag to install only for the current user, or you may want to use virtual environments).</p>
<p>Make sure that the <tt class="docutils literal">minizinc</tt> binary are on the <tt class="docutils literal">PATH</tt> environment variable when you start the notebook server. The easiest way to do that is to get the “bundled installation” that includes the MiniZinc IDE and a few solvers, available from GitHub here: <a class="reference external" href="https://github.com/MiniZinc/MiniZincIDE/releases/latest">https://github.com/MiniZinc/MiniZincIDE/releases/latest</a>
You then need to change your <tt class="docutils literal">PATH</tt> environment variable to include the MiniZinc installation.</p>
</section>
<section id="basic-usage">
<h2><span class="section-number">3.10.2. </span>Basic usage<a class="headerlink" href="#basic-usage" title="Link to this heading"></a></h2>
<p>After installing the module, you have to load the extension using <tt class="docutils literal">%load_ext iminizinc</tt>. This will enable the cell magic <tt class="docutils literal">%%minizinc</tt>, which lets you solve MiniZinc models. Here is a simple example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>  <span class="o">%</span><span class="n">load_ext</span> <span class="n">iminizinc</span>

<span class="n">In</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>  <span class="n">n</span><span class="o">=</span><span class="mi">8</span>

<span class="n">In</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>  <span class="o">%%</span><span class="n">minizinc</span>

        <span class="n">include</span> <span class="s2">&quot;globals.mzn&quot;</span><span class="p">;</span>
        <span class="nb">int</span><span class="p">:</span> <span class="n">n</span><span class="p">;</span>
        <span class="n">array</span><span class="p">[</span><span class="mf">1.</span><span class="o">.</span><span class="n">n</span><span class="p">]</span> <span class="n">of</span> <span class="n">var</span> <span class="mf">1.</span><span class="o">.</span><span class="n">n</span><span class="p">:</span> <span class="n">queens</span><span class="p">;</span>
        <span class="n">constraint</span> <span class="n">all_different</span><span class="p">(</span><span class="n">queens</span><span class="p">);</span>
        <span class="n">constraint</span> <span class="n">all_different</span><span class="p">([</span><span class="n">queens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="n">i</span> <span class="o">|</span> <span class="n">i</span> <span class="ow">in</span> <span class="mf">1.</span><span class="o">.</span><span class="n">n</span><span class="p">]);</span>
        <span class="n">constraint</span> <span class="n">all_different</span><span class="p">([</span><span class="n">queens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="n">i</span> <span class="o">|</span> <span class="n">i</span> <span class="ow">in</span> <span class="mf">1.</span><span class="o">.</span><span class="n">n</span><span class="p">]);</span>
        <span class="n">solve</span> <span class="n">satisfy</span><span class="p">;</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="p">{</span><span class="sa">u</span><span class="s1">&#39;queens&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]}</span>
</pre></div>
</div>
<p>As you can see, the model binds variables in the environment (in this case, <tt class="docutils literal">n</tt>) to MiniZinc parameters, and returns an object with fields for all declared decision variables.</p>
<p>Alternatively, you can bind the decision variables to Python variables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>  <span class="o">%</span><span class="n">load_ext</span> <span class="n">iminizinc</span>

<span class="n">In</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>  <span class="n">n</span><span class="o">=</span><span class="mi">8</span>

<span class="n">In</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>  <span class="o">%%</span><span class="n">minizinc</span> <span class="o">-</span><span class="n">m</span> <span class="n">bind</span>

        <span class="n">include</span> <span class="s2">&quot;globals.mzn&quot;</span><span class="p">;</span>
        <span class="nb">int</span><span class="p">:</span> <span class="n">n</span><span class="p">;</span>
        <span class="n">array</span><span class="p">[</span><span class="mf">1.</span><span class="o">.</span><span class="n">n</span><span class="p">]</span> <span class="n">of</span> <span class="n">var</span> <span class="mf">1.</span><span class="o">.</span><span class="n">n</span><span class="p">:</span> <span class="n">queens</span><span class="p">;</span>
        <span class="n">constraint</span> <span class="n">all_different</span><span class="p">(</span><span class="n">queens</span><span class="p">);</span>
        <span class="n">constraint</span> <span class="n">all_different</span><span class="p">([</span><span class="n">queens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="n">i</span> <span class="o">|</span> <span class="n">i</span> <span class="ow">in</span> <span class="mf">1.</span><span class="o">.</span><span class="n">n</span><span class="p">]);</span>
        <span class="n">constraint</span> <span class="n">all_different</span><span class="p">([</span><span class="n">queens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="n">i</span> <span class="o">|</span> <span class="n">i</span> <span class="ow">in</span> <span class="mf">1.</span><span class="o">.</span><span class="n">n</span><span class="p">]);</span>
        <span class="n">solve</span> <span class="n">satisfy</span><span class="p">;</span>

<span class="n">In</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span>  <span class="n">queens</span>

<span class="n">Out</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>If you want to find all solutions of a satisfaction problem, or all intermediate solutions of an optimisation problem, you can use the <tt class="docutils literal">-a</tt> flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>  <span class="o">%</span><span class="n">load_ext</span> <span class="n">iminizinc</span>

<span class="n">In</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>  <span class="n">n</span><span class="o">=</span><span class="mi">6</span>

<span class="n">In</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>  <span class="o">%%</span><span class="n">minizinc</span> <span class="o">-</span><span class="n">a</span>

        <span class="n">include</span> <span class="s2">&quot;globals.mzn&quot;</span><span class="p">;</span>
        <span class="nb">int</span><span class="p">:</span> <span class="n">n</span><span class="p">;</span>
        <span class="n">array</span><span class="p">[</span><span class="mf">1.</span><span class="o">.</span><span class="n">n</span><span class="p">]</span> <span class="n">of</span> <span class="n">var</span> <span class="mf">1.</span><span class="o">.</span><span class="n">n</span><span class="p">:</span> <span class="n">queens</span><span class="p">;</span>
        <span class="n">constraint</span> <span class="n">all_different</span><span class="p">(</span><span class="n">queens</span><span class="p">);</span>
        <span class="n">constraint</span> <span class="n">all_different</span><span class="p">([</span><span class="n">queens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="n">i</span> <span class="o">|</span> <span class="n">i</span> <span class="ow">in</span> <span class="mf">1.</span><span class="o">.</span><span class="n">n</span><span class="p">]);</span>
        <span class="n">constraint</span> <span class="n">all_different</span><span class="p">([</span><span class="n">queens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="n">i</span> <span class="o">|</span> <span class="n">i</span> <span class="ow">in</span> <span class="mf">1.</span><span class="o">.</span><span class="n">n</span><span class="p">]);</span>
        <span class="n">solve</span> <span class="n">satisfy</span><span class="p">;</span>

<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="p">[{</span><span class="sa">u</span><span class="s1">&#39;queens&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">]},</span>
         <span class="p">{</span><span class="sa">u</span><span class="s1">&#39;queens&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">]},</span>
         <span class="p">{</span><span class="sa">u</span><span class="s1">&#39;queens&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">]},</span>
         <span class="p">{</span><span class="sa">u</span><span class="s1">&#39;queens&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]}]</span>
</pre></div>
</div>
<p>The magic supports a number of additional options, in particular loading MiniZinc models and data from files. Some of these may only work with the development version of MiniZinc (i.e., not the one that comes with the bundled binary releases). You can take a look at the help using</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>In[1]:  %%minizinc?
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mzn-analyse.html" class="btn btn-neutral float-left" title="3.9. Mzn-Analyse" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="python.html" class="btn btn-neutral float-right" title="3.11. Python Interface" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016, 2017, 2018, 2019, 2020 Peter J. Stuckey, Kim Marriott, Guido Tack.</p>
  </div>

  
<a rel="license" href="http://creativecommons.org/licenses/by-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nd/4.0/80x15.png" /></a>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-63390311-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-63390311-1', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>